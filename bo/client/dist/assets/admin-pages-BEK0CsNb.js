import{r as e,j as a,N as t,a as s,L as r,u as l,b as i,c as d}from"./vendor-react-C_8VFpHS.js";import{B as n,C as o,X as c,a as x,T as m,S as g,I as u,b as h,c as p,d as b,e as y,M as j,P as f,f as v,g as N,L as k,h as w,i as C,j as S,D as P,k as E,F as _,l as T,E as A,m as R,n as O,o as z,H as $,p as q,U as D,q as M,r as L,s as I,t as F,u as B,v as V,w as U,x as G,y as W,z as H,A as X,G as Y,J as K,K as Q,N as J,O as Z,Q as ee,R as ae,V as te,W as se,Y as re,Z as le,_ as ie,$ as de,a0 as ne,a1 as oe,a2 as ce,a3 as xe,a4 as me,a5 as ge,a6 as ue,a7 as he,a8 as pe,a9 as be,aa as ye}from"./vendor-ui-YChLk40K.js";import{Q as je,O as fe,H as ve,C as Ne,a as ke,b as we,F as Ce,c as Se,d as Pe,e as Ee,f as _e,g as Te,h as Ae,I as Re,S as Oe}from"./client-pages-Dbz7aJA8.js";import{P as ze}from"./vendor-misc-CBkftaNl.js";import{a as $e}from"./vendor-utils-BR-hopFF.js";const qe={},De=function(e,a,t){let s=Promise.resolve();if(a&&a.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),r=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));s=e(a.map(e=>{if((e=function(e){return"/"+e}(e))in qe)return;qe[e]=!0;const a=e.endsWith(".css"),t=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const s=document.createElement("link");return s.rel=a?"stylesheet":"modulepreload",a||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),a?new Promise((a,t)=>{s.addEventListener("load",a),s.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=e,window.dispatchEvent(a),!a.defaultPrevented)throw e}return s.then(a=>{for(const e of a||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},Me={ERROR:0,WARN:1,INFO:2,DEBUG:3},Le=new class{constructor(e=Me.INFO){this.level=e,this.context=""}setContext(e){return this.context=e,this}shouldLog(e){return e<=this.level}formatMessage(e,a,...t){return{timestamp:(new Date).toISOString(),level:Object.keys(Me)[e],context:this.context,message:a,args:t}}error(e,...a){this.shouldLog(Me.ERROR)&&(this.formatMessage(Me.ERROR,e,...a),window.gtag&&window.gtag("event","exception",{description:e,fatal:!1}))}warn(e,...a){this.shouldLog(Me.WARN)&&this.formatMessage(Me.WARN,e,...a)}info(e,...a){this.shouldLog(Me.INFO)&&this.formatMessage(Me.INFO,e,...a)}debug(e,...a){this.shouldLog(Me.DEBUG)&&this.formatMessage(Me.DEBUG,e,...a)}logApiRequest(e,a,t=null){this.debug(`API Request: ${e.toUpperCase()} ${a}`,t)}logApiResponse(e,a,t,s=null){const r=t>=200&&t<300?"✅":t>=400?"❌":"⚠️";this.debug(`${r} API Response: ${e.toUpperCase()} ${a} - ${t}`,s)}logApiError(e,a,t){this.error(`API Error: ${e.toUpperCase()} ${a}`,t)}logPerformance(e,a){this.info(`⏱️ Performance: ${e} took ${a}ms`)}logUserAction(e,a=null){this.info(`👤 User Action: ${e}`,a)}},Ie=e.createContext(),Fe=()=>{const a=e.useContext(Ie);if(!a)throw new Error("useLanguage must be used within a LanguageProvider");return a},Be={es:{code:"es",name:"Español",flag:"🇪🇸"},en:{code:"en",name:"English",flag:"🇺🇸"},fr:{code:"fr",name:"Français",flag:"🇫🇷"},pt:{code:"pt",name:"Português",flag:"🇧🇷"}},Ve=({children:t})=>{const[s,r]=e.useState("es"),[l,i]=e.useState({}),[d,n]=e.useState(!0);e.useEffect(()=>{(async()=>{try{n(!0),Le.setContext("LanguageContext").info(`Loading translations for language: ${s}`);const e=await((e,a)=>{const t=Object.assign({"../translations/en.js":()=>De(()=>import("./en-D_JiPOvA.js"),[]),"../translations/es.js":()=>De(()=>import("./es-BUfmqj_X.js"),[]),"../translations/fr.js":()=>De(()=>import("./fr-Dp6SvEJ1.js"),[]),"../translations/pt.js":()=>De(()=>import("./pt-DqgVFyx9.js"),[])})[a];return t?"function"==typeof t?t():Promise.resolve(t):new Promise((e,t)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a+(3!==a.split("/").length?". Note that variables only represent file names one level deep.":""))))})})(0,`../translations/${s}.js`);Le.info("Translations loaded:",e.default?"Success":"Failed - no default export"),i(e.default||{})}catch(e){if(Le.error(`Error loading translations for ${s}:`,e),"es"!==s)try{Le.info("Loading fallback translations (Spanish)");const e=await De(()=>import("./es-BUfmqj_X.js"),[]);i(e.default||{})}catch(a){Le.error("Error loading fallback translations:",a),i({})}else i({})}finally{n(!1)}})()},[s]),e.useEffect(()=>{const e=localStorage.getItem("language");e&&Be[e]&&r(e)},[]);const o={currentLanguage:s,supportedLanguages:Be,changeLanguage:e=>{Be[e]&&(r(e),localStorage.setItem("language",e))},t:(e,a={})=>{if(d)return e;if(0===Object.keys(l).length)return e;const t=e.split(".");let s=l;for(const r of t)if(s=null==s?void 0:s[r],void 0===s)break;return void 0===s?e:"string"==typeof s&&Object.keys(a).length>0?s.replace(/\{\{(\w+)\}\}/g,(e,t)=>void 0!==a[t]?a[t]:e):s},isLoading:d};return a.jsx(Ie.Provider,{value:o,children:t})};Ve.propTypes={children:ze.node.isRequired};const Ue=$e.create({baseURL:"https://saas-backend-33g1.onrender.com",headers:{"Content-Type":"application/json"},withCredentials:!0,timeout:1e4});Ue.interceptors.request.use(e=>(e.metadata={startTime:new Date},e),e=>Promise.reject(e)),Ue.interceptors.response.use(e=>(e.config.metadata.startTime,e),e=>{var a,t,s,r,l,i,d,n,o,c;let x="unknown";(null==(t=null==(a=e.config)?void 0:a.metadata)?void 0:t.startTime)&&(x=new Date-e.config.metadata.startTime),(null==(r=null==(s=e.config)?void 0:s.url)?void 0:r.includes("/api/auth/profile"))&&(null==(l=e.response)||l.status);const m=Ge(e),g={...e,userMessage:m,statusCode:null==(i=e.response)?void 0:i.status,duration:x};return"undefined"!=typeof window&&window.showToast&&((null==(d=e.response)?void 0:d.status)>=500?window.showToast({type:"error",message:"Error del servidor. Intenta de nuevo más tarde.",duration:5e3}):401===(null==(n=e.response)?void 0:n.status)?window.showToast({type:"warning",message:"Sesión expirada. Por favor, inicia sesión nuevamente.",duration:5e3}):403===(null==(o=e.response)?void 0:o.status)?window.showToast({type:"error",message:"No tienes permisos para realizar esta acción.",duration:5e3}):429===(null==(c=e.response)?void 0:c.status)&&window.showToast({type:"warning",message:"Demasiadas solicitudes. Intenta de nuevo en unos momentos.",duration:5e3})),Promise.reject(g)});const Ge=e=>{if("NETWORK_ERROR"===e.code||!e.response)return"Error de conexión. Verifica tu conexión a internet.";if("ECONNABORTED"===e.code)return"La solicitud tardó demasiado. Intenta de nuevo.";if(e.response){const{status:a,data:t}=e.response;if(null==t?void 0:t.message)return t.message;switch(a){case 400:return"Datos de entrada inválidos.";case 401:return"No autorizado. Inicia sesión nuevamente.";case 403:return"No tienes permisos para realizar esta acción.";case 404:return"Recurso no encontrado.";case 409:return"Conflicto con el estado actual del recurso.";case 422:return"Los datos proporcionados no son válidos.";case 429:return"Demasiadas solicitudes. Intenta más tarde.";case 500:return"Error interno del servidor.";case 502:return"Servidor no disponible temporalmente.";case 503:return"Servicio no disponible.";default:return`Error del servidor (${a}).`}}return"Ha ocurrido un error inesperado."},We=()=>Ue.get("/api/users"),He=e=>Ue.post("/api/users",e),Xe=(e,a)=>Ue.put(`/api/users/${e}`,a),Ye=e=>Ue.delete(`/api/users/${e}`),Ke=()=>Ue.get("/api/orders"),Qe=(e,a)=>Ue.put(`/api/orders/${e}`,a),Je=e=>Ue.delete(`/api/orders/${e}`),Ze=(e,a)=>Ue.put(`/api/orders/${e}/status`,{estado:a}),ea=()=>Ue.get("/api/payments"),aa=(e,a)=>Ue.put(`/api/payments/${e}`,a),ta=e=>Ue.delete(`/api/payments/${e}`),sa=()=>Ue.get("/api/config"),ra=()=>Ue.get("/api/quotes"),la=(e,a)=>Ue.put(`/api/quotes/${e}`,a),ia=e=>Ue.delete(`/api/quotes/${e}`),da=e=>Ue.post(`/api/quotes/${e}/convert`),na=()=>Ue.get("/api/admin/stats"),oa=(e="month")=>Ue.get(`/api/admin/charts?period=${e}`),ca=()=>Ue.get("/api/messages"),xa=e=>Ue.post("/api/messages",e),ma=e=>Ue.put(`/api/messages/${e}/read`),ga=()=>Ue.get("/api/email-campaigns"),ua=e=>Ue.post("/api/email-campaigns",e),ha=e=>Ue.post(`/api/email-campaigns/${e}/send`),pa=(e={})=>Ue.get("/api/invoices",{params:e}),ba=(e,a)=>Ue.put(`/api/invoices/${e}/status`,a),ya=()=>Ue.get("/api/notifications"),ja=()=>Ue.get("/api/notifications/unread-count"),fa=e=>Ue.put(`/api/notifications/${e}/read`),va=()=>Ue.put("/api/notifications/mark-all-read"),Na=e=>Ue.delete(`/api/notifications/${e}`),ka=e.createContext(),wa=()=>{const a=e.useContext(ka);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},Ca=({children:t})=>{const[s,r]=e.useState(null),[l,i]=e.useState(!0),d=e.useCallback(async()=>{var e;try{const e=await Ue.get("/api/auth/profile");r(e.data)}catch(a){401===(null==(e=a.response)?void 0:e.status)||"ERR_NETWORK"!==a.code&&a.response,r(null)}finally{i(!1)}},[]);e.useEffect(()=>{d()},[d]);const n={user:s,loading:l,isAuthenticated:!!s,login:async e=>{i(!0);try{const a=await(e=>Ue.post("/api/auth/login",e))(e);return await d(),a.data}catch(a){throw r(null),i(!1),a}},logout:()=>{r(null)},checkUserSession:d};return a.jsx(ka.Provider,{value:n,children:!l&&t})},Sa=a=>{const t=e.useRef();return e.useEffect(()=>{const e=e=>{t.current&&!t.current.contains(e.target)&&a()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}},[a]),t},Pa=({children:e,variant:t="primary",size:s="md",loading:r=!1,disabled:l=!1,className:i="",icon:d=null,iconPosition:n="left",...o})=>{const c=["inline-flex items-center justify-center font-medium rounded-lg transition-all duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transform active:scale-95",{primary:"bg-gradient-to-r from-primary to-secondary text-white hover:from-primary/90 hover:to-secondary/90 focus:ring-primary shadow-lg hover:shadow-xl hover:-translate-y-0.5",secondary:"bg-white dark:bg-dark text-primary dark:text-secondary border-2 border-primary dark:border-secondary hover:bg-primary hover:text-white dark:hover:bg-secondary dark:hover:text-white focus:ring-primary",accent:"bg-accent text-white hover:bg-accent/90 focus:ring-accent shadow-md hover:shadow-lg hover:-translate-y-0.5",ghost:"text-primary dark:text-secondary hover:bg-primary/10 dark:hover:bg-secondary/10 focus:ring-primary",danger:"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-md hover:shadow-lg hover:-translate-y-0.5",success:"bg-green-500 text-white hover:bg-green-600 focus:ring-green-500 shadow-md hover:shadow-lg hover:-translate-y-0.5"}[t],{xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"}[s],i].filter(Boolean).join(" ");return a.jsxs("button",{className:c,disabled:l||r,...o,children:["left"===n&&(r?a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d),r?"Cargando...":e,"right"===n&&!r&&d]})};Pa.propTypes={children:ze.node.isRequired,variant:ze.oneOf(["primary","secondary","accent","ghost","danger","success"]),size:ze.oneOf(["xs","sm","md","lg","xl"]),loading:ze.bool,disabled:ze.bool,className:ze.string,icon:ze.node,iconPosition:ze.oneOf(["left","right"])};const Ea=({isOpen:t,onClose:s})=>{const[r,l]=e.useState([]),[i,d]=e.useState(0),[y,j]=e.useState(!1),[f,v]=e.useState("all"),N=e.useRef(null);e.useEffect(()=>{t&&k()},[t]),e.useEffect(()=>{w();const e=setInterval(w,3e4);return()=>clearInterval(e)},[]),e.useEffect(()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&s()};if(t)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[t,s]);const k=async()=>{try{j(!0);const e=await ya();e.data.success&&l(e.data.data)}catch(e){}finally{j(!1)}},w=async()=>{try{const e=await ja();e.data.success&&d(e.data.data.unreadCount)}catch(e){}},C=e=>{const t={className:"w-5 h-5"};switch(e){case"success":return a.jsx(b,{...t,className:"w-5 h-5 text-green-600"});case"error":return a.jsx(p,{...t,className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(h,{...t,className:"w-5 h-5 text-yellow-600"});default:return a.jsx(u,{...t,className:"w-5 h-5 text-blue-600"})}},S=e=>{switch(e){case"urgente":return"border-l-red-500";case"alta":return"border-l-orange-500";case"normal":default:return"border-l-blue-500";case"baja":return"border-l-gray-500"}},P=e=>{const a=new Date(e),t=new Date,s=Math.floor((t-a)/6e4);return s<1?"Ahora":s<60?`${s}m`:s<1440?`${Math.floor(s/60)}h`:`${Math.floor(s/1440)}d`},E=r.filter(e=>"unread"===f?!e.leida:"read"!==f||e.leida);return t?a.jsxs("div",{ref:N,className:"absolute top-full right-0 mt-2 w-96 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(n,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Notificaciones"}),i>0&&a.jsx("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[1.25rem] text-center",children:i})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:async()=>{try{await va(),l(e=>e.map(e=>({...e,leida:!0}))),d(0)}catch(e){}},disabled:0===i,className:"p-2 text-gray-500 hover:text-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",title:"Marcar todas como leídas",children:a.jsx(o,{className:"w-4 h-4"})}),a.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:[{key:"all",label:"Todas"},{key:"unread",label:"No leídas"},{key:"read",label:"Leídas"}].map(({key:e,label:t})=>a.jsx("button",{onClick:()=>v(e),className:"flex-1 px-4 py-2 text-sm font-medium transition-colors "+(f===e?"text-blue-600 dark:text-blue-400 border-b-2 border-blue-600 dark:border-blue-400":"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200"),children:t},e))}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:y?a.jsx("div",{className:"flex justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):0===E.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"unread"===f?"No hay notificaciones sin leer":"read"===f?"No hay notificaciones leídas":"No tienes notificaciones"})]}):a.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map(e=>a.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors border-l-4 ${S(e.prioridad)} ${e.leida?"":"bg-blue-50 dark:bg-blue-900/10"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:C(e.tipo)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 mb-1",children:e.titulo}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:e.mensaje}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:P(e.created_at)})]}),a.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[!e.leida&&a.jsx("button",{onClick:()=>(async e=>{try{await fa(e),l(a=>a.map(a=>a.id===e?{...a,leida:!0}:a)),await w()}catch(a){}})(e.id),className:"p-1 text-gray-400 hover:text-blue-600 transition-colors",title:"Marcar como leída",children:a.jsx(x,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>(async e=>{try{await Na(e),l(a=>a.filter(a=>a.id!==e)),await w()}catch(a){}})(e.id),className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Eliminar",children:a.jsx(m,{className:"w-4 h-4"})})]})]})},e.id))})}),a.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("button",{className:"w-full flex items-center justify-center gap-2 text-sm text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[a.jsx(g,{className:"w-4 h-4"}),"Configurar notificaciones"]})})]}):null};Ea.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired};const _a=e.memo(function({companyName:s="Borderless Techno Company"}){var r,l,i;const{user:d,logout:o}=wa(),{t:c,currentLanguage:x,supportedLanguages:m,changeLanguage:g}=Fe(),[u,h]=e.useState(!1),[p,b]=e.useState(!1),[y,j]=e.useState(!1),[f,v]=e.useState(0),N=Sa(()=>{h(!1)}),k=Sa(()=>{b(!1)});e.useEffect(()=>{const e=e=>{"Escape"===e.key&&(h(!1),b(!1),j(!1))};return u||p||y?(document.addEventListener("keydown",e),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[u,p,y]),e.useEffect(()=>{const e=async()=>{if(d)try{const e=await ja();e.data.success&&v(e.data.data.unreadCount)}catch(e){}};e();const a=setInterval(e,3e4);return()=>clearInterval(a)},[d]);const w=e.useCallback(()=>{o(),h(!1)},[o]),C=[...e.useCallback(()=>[{to:"/",label:c("nav.home"),icon:"🏠"},{to:"/servicios",label:c("nav.services"),icon:"⚙️"},{to:"/portafolio",label:c("nav.portfolio"),icon:"💼"},{to:"/nosotros",label:c("nav.about"),icon:"👥"}],[c])(),...(()=>{if(!d)return[];const e=[];return"admin"===d.rol?e.push({to:"/admin/dashboard",label:c("nav.dashboard"),icon:"📊"}):e.push({to:"/panel-cliente",label:c("nav.myPanel"),icon:"📊"}),e})()],S=d?[{action:"logout",label:c("nav.logout"),icon:"🚪",user:d.nombre||d.email}]:[{to:"/login",label:c("nav.login"),icon:"🔐"}];return a.jsx("header",{className:"w-full bg-white/90 dark:bg-slate-900/90 backdrop-blur-lg border-b border-white/20 dark:border-slate-700/30 transition-all duration-300 fixed top-0 left-0 right-0 z-50 shadow-sm",role:"banner",children:a.jsxs("nav",{className:"container mx-auto px-4 py-3","aria-label":"Main navigation",children:[a.jsxs("div",{className:"flex items-center justify-between gap-4 min-h-[60px]",children:[a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[a.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm sm:text-lg",children:"B"})}),a.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white hidden xs:block",children:s}),a.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white xs:hidden",children:"Borderless"})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-1 lg:space-x-2 flex-1 justify-center",children:C.map(e=>a.jsxs(t,{to:e.to,className:({isActive:e})=>"flex items-center px-2 lg:px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:bg-white/30 dark:hover:bg-slate-800/60 whitespace-nowrap "+(e?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white"),children:[a.jsx("span",{className:"hidden lg:inline mr-2",children:e.icon}),a.jsx("span",{className:"hidden md:inline",children:e.label}),a.jsx("span",{className:"md:hidden text-lg",children:e.icon})]},e.to))}),a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[d&&a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>j(!y),className:"relative p-2 rounded-lg bg-white/30 dark:bg-slate-800/60 hover:bg-white/50 dark:hover:bg-slate-800/80 transition-colors duration-200 backdrop-blur-sm","aria-label":"Notificaciones","aria-expanded":y,children:[a.jsx(n,{className:"w-5 h-5 text-gray-700 dark:text-gray-300"}),f>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[1.25rem] h-5 flex items-center justify-center px-1",children:f>99?"99+":f})]}),a.jsx(Ea,{isOpen:y,onClose:()=>j(!1)})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-2 lg:space-x-3",children:S.map(e=>{var s;return"logout"===e.action?a.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 lg:space-x-3",children:[a.jsx("div",{className:"w-7 h-7 lg:w-8 lg:h-8 bg-gradient-to-r from-violet-500 to-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-xs lg:text-sm",children:((null==(s=e.user)?void 0:s.charAt(0))||"U").toUpperCase()})}),a.jsxs("div",{className:"text-right hidden lg:block",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.user}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"admin"===(null==d?void 0:d.rol)?c("roles.admin"):c("roles.client")})]})]}),a.jsx(Pa,{onClick:w,variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 hidden lg:flex",icon:a.jsx("span",{className:"hidden xl:inline mr-2",children:e.icon}),children:e.label}),a.jsx("button",{onClick:w,className:"lg:hidden p-2 rounded-lg text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors duration-200","aria-label":e.label,title:e.label,children:a.jsx("span",{className:"text-lg",children:e.icon})})]},"user-menu"):a.jsxs(t,{to:e.to,className:({isActive:a})=>"flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 "+("/register"===e.to?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white hover:from-blue-600 hover:to-cyan-600 shadow-lg hover:shadow-xl transform hover:scale-105":a?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-white/30 dark:hover:bg-slate-800/60"),children:[a.jsx("span",{className:"hidden xl:inline mr-2",children:e.icon}),e.label]},e.to)})}),a.jsxs("div",{className:"relative",ref:k,children:[a.jsxs("button",{onClick:()=>b(!p),className:"p-2 rounded-lg bg-white/30 dark:bg-slate-800/60 hover:bg-white/50 dark:hover:bg-slate-800/80 transition-colors duration-200 backdrop-blur-sm flex items-center space-x-1","aria-label":c("accessibility.selectLanguage"),"aria-expanded":p,children:[a.jsx("span",{className:"text-lg",children:null==(r=m[x])?void 0:r.flag}),a.jsx("svg",{className:"w-4 h-4 transition-transform duration-200 text-gray-700 dark:text-gray-300 "+(p?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&a.jsx("div",{className:"absolute right-0 mt-2 w-40 backdrop-blur-xl bg-white/90 dark:bg-slate-800/90 rounded-xl border border-white/20 dark:border-slate-700/30 shadow-lg z-50 animate-slideInLeft",children:Object.values(m).map(e=>a.jsxs("button",{onClick:()=>{g(e.code),b(!1)},className:`w-full text-left px-4 py-3 text-sm font-medium transition-colors duration-200 flex items-center space-x-3 ${x===e.code?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400":"text-gray-700 dark:text-gray-300 hover:bg-white/40 dark:hover:bg-slate-700/40"} ${e.code===Object.values(m)[0].code?"rounded-t-xl":""} ${e.code===Object.values(m)[Object.values(m).length-1].code?"rounded-b-xl":""}`,children:[a.jsx("span",{className:"text-lg",children:e.flag}),a.jsx("span",{children:e.name})]},e.code))})]}),a.jsx("button",{className:"md:hidden p-2 rounded-lg bg-white/30 dark:bg-slate-800/60 hover:bg-white/50 dark:hover:bg-slate-800/80 transition-colors duration-200 backdrop-blur-sm","aria-label":c("accessibility.openMenu"),"aria-expanded":u,onClick:()=>h(!u),children:a.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 transition-transform duration-200 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:u?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16"})})})]})]}),u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 md:hidden",onClick:()=>h(!1),"aria-hidden":"true"}),a.jsxs("div",{ref:N,className:"md:hidden mt-4 p-4 backdrop-blur-xl bg-white/95 dark:bg-slate-800/95 rounded-xl border border-white/20 dark:border-slate-700/30 shadow-xl animate-slideInLeft relative z-50",role:"menu","aria-orientation":"vertical",children:[d&&a.jsx("div",{className:"mb-4 p-3 bg-white/40 dark:bg-slate-700/40 rounded-lg backdrop-blur-sm",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-violet-500 to-blue-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-medium text-sm",children:((null==(l=d.nombre)?void 0:l.charAt(0))||(null==(i=d.email)?void 0:i.charAt(0))||"U").toUpperCase()})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:d.nombre||d.email}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"admin"===d.rol?c("roles.admin"):c("roles.client")})]})]})}),a.jsx("div",{className:"space-y-2 mb-6",children:C.map(e=>a.jsxs(t,{to:e.to,className:({isActive:e})=>"flex items-center px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 group "+(e?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-slate-700/50 hover:scale-105"),onClick:()=>h(!1),children:[a.jsx("span",{className:"mr-4 text-xl group-hover:scale-110 transition-transform duration-200",children:e.icon}),a.jsx("span",{className:"font-semibold",children:e.label})]},e.to))}),a.jsx("div",{className:"border-t border-white/20 dark:border-slate-700/30 pt-4 space-y-2",children:S.map(e=>"logout"===e.action?a.jsxs("button",{onClick:w,className:"w-full flex items-center justify-start px-4 py-3 rounded-lg text-base font-semibold text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all duration-200 group hover:scale-105",children:[a.jsx("span",{className:"mr-4 text-xl group-hover:scale-110 transition-transform duration-200",children:e.icon}),e.label]},"logout"):a.jsxs(t,{to:e.to,className:({isActive:a})=>"flex items-center px-4 py-3 rounded-lg text-base font-semibold transition-all duration-200 group "+("/register"===e.to?"bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg hover:shadow-xl hover:scale-105":a?"bg-blue-500/10 dark:bg-blue-500/20 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-700 dark:text-gray-300 hover:bg-white/50 dark:hover:bg-slate-700/50 hover:scale-105"),onClick:()=>h(!1),children:[a.jsx("span",{className:"mr-4 text-xl group-hover:scale-110 transition-transform duration-200",children:e.icon}),e.label]},e.to))})]})]})]})})});_a.propTypes={companyName:ze.string};const Ta=({id:t,type:s="info",title:r,message:l,duration:i=5e3,onClose:d,actionButton:n=null})=>{const[o,x]=e.useState(!1),[m,g]=e.useState(!1);e.useEffect(()=>{if(setTimeout(()=>x(!0),10),i>0){const e=setTimeout(()=>{y()},i);return()=>clearTimeout(e)}},[i]);const y=()=>{g(!0),setTimeout(()=>{null==d||d(t)},300)},j=m?"transform translate-x-full opacity-0":o?"transform translate-x-0 opacity-100":"transform translate-x-full opacity-0";return a.jsxs("div",{className:`${(()=>{const e="relative flex items-start p-4 rounded-lg shadow-lg border-l-4 backdrop-blur-sm";switch(s){case"success":return`${e} bg-green-50 dark:bg-green-900/20 border-green-500 text-green-800 dark:text-green-200`;case"error":return`${e} bg-red-50 dark:bg-red-900/20 border-red-500 text-red-800 dark:text-red-200`;case"warning":return`${e} bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500 text-yellow-800 dark:text-yellow-200`;default:return`${e} bg-blue-50 dark:bg-blue-900/20 border-blue-500 text-blue-800 dark:text-blue-200`}})()} transition-all duration-300 ease-in-out ${j} max-w-md w-full`,children:[a.jsx("div",{className:"mr-3",children:(()=>{const e={className:"w-5 h-5 flex-shrink-0 mt-0.5"};switch(s){case"success":return a.jsx(b,{...e});case"error":return a.jsx(p,{...e});case"warning":return a.jsx(h,{...e});default:return a.jsx(u,{...e})}})()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[r&&a.jsx("h4",{className:"text-sm font-semibold mb-1",children:r}),a.jsx("p",{className:"text-sm",children:l}),n&&a.jsx("div",{className:"mt-3",children:n})]}),a.jsx("button",{onClick:y,className:"ml-3 flex-shrink-0 p-1 rounded-md hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:a.jsx(c,{className:"w-4 h-4"})}),i>0&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 dark:bg-white/10 rounded-b-lg overflow-hidden",children:a.jsx("div",{className:"h-full bg-current transition-all ease-linear",style:{width:"100%",animation:`toast-progress ${i}ms linear forwards`}})}),a.jsx("style",{jsx:!0,children:"\n        @keyframes toast-progress {\n          from { width: 100%; }\n          to { width: 0%; }\n        }\n      "})]})};Ta.propTypes={id:ze.oneOfType([ze.string,ze.number]).isRequired,type:ze.oneOf(["success","error","warning","info"]),title:ze.string,message:ze.string.isRequired,duration:ze.number,onClose:ze.func,actionButton:ze.node};let Aa=0;const Ra=()=>{const[t,r]=e.useState([]),l=e.useCallback(e=>{const a=++Aa,t={id:a,...e};return r(e=>[...e,t]),a},[]),i=e.useCallback(e=>{r(a=>a.filter(a=>a.id!==e))},[]),d=e.useCallback(()=>{r([])},[]);return"undefined"!=typeof window&&(window.showToast=l,window.clearAllToasts=d),0===t.length?null:s.createPortal(a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:t.map(e=>a.jsx(Ta,{...e,onClose:i},e.id))}),document.body)},Oa=()=>{const{t:e}=Fe();return a.jsx("footer",{className:"w-full bg-gradient-to-b from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 border-t border-white/20 dark:border-slate-700/30",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(y,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600 dark:text-blue-400 flex-shrink-0"}),a.jsxs("span",{className:"text-base sm:text-xl font-bold text-gray-900 dark:text-white break-words",children:[a.jsx("span",{className:"hidden sm:inline",children:"BORDERLESS TECHNO COMPANY"}),a.jsx("span",{className:"sm:hidden",children:"BORDERLESS"})]})]}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-300 leading-relaxed",children:"Transformamos ideas en soluciones digitales innovadoras. Tu partner tecnológico de confianza."}),a.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-4",children:[{icon:"f",href:"https://www.facebook.com/people/Borderless-Tec/61579093850608/",label:"Facebook"},{icon:"𝕏",href:"https://twitter.com/borderlesstechno",label:"Twitter"},{icon:"in",href:"https://linkedin.com/company/borderless-techno",label:"LinkedIn"},{icon:"📷",href:"https://www.instagram.com/p/DM0zxo9P1kd/",label:"Instagram"},{icon:"♪",href:"https://www.tiktok.com/search?q=borderlesstechno7",label:"TikTok"}].map(e=>a.jsx("a",{href:e.href,target:"_blank",rel:"noopener noreferrer",className:"group p-2 sm:p-3 backdrop-blur-xl bg-white/30 dark:bg-slate-800/30 border border-white/20 dark:border-slate-700/30 rounded-xl\n                           hover:bg-gradient-to-r hover:from-blue-500 hover:to-cyan-500 hover:border-blue-500 hover:text-white hover:scale-110\n                           transition-all duration-300 shadow-sm hover:shadow-lg flex-shrink-0","aria-label":`Visitar ${e.label}`,title:`Síguenos en ${e.label}`,children:a.jsx("span",{className:"text-xl group-hover:animate-pulse",children:e.icon})},e.label))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Enlaces Rápidos"}),a.jsx("ul",{className:"space-y-2",children:[{name:"Inicio",href:"/"},{name:"Servicios",href:"/servicios"},{name:"Portafolio",href:"/portafolio"},{name:"Nosotros",href:"/nosotros"},{name:"Contacto",href:"/contacto"}].map(e=>a.jsx("li",{children:a.jsx(r,{to:e.href,className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-300 inline-block",children:e.name})},e.name))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Servicios"}),a.jsx("ul",{className:"space-y-2",children:["Desarrollo Web","Apps Móviles","Sistemas Backend","Soluciones Cloud","Ciberseguridad","Automatización"].map(e=>a.jsx("li",{children:a.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:e})},e))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Contacto"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(j,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 break-words",children:"borderlesstechno7@gmail.com"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(f,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"+1 (717) 655-4737"})]}),a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(v,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"18 N 13th St. Harrisburg, Pennsylvania, 17103 United States"})]})]})]})]}),a.jsxs("div",{className:"border-t border-white/20 dark:border-slate-700/30 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[a.jsx("div",{className:"text-gray-600 dark:text-gray-300 text-xs sm:text-sm text-center md:text-left",children:"© 2025 BORDERLESS TECHNO COMPANY. Todos los derechos reservados."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6",children:[a.jsx(r,{to:"/privacy-policy",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 text-xs sm:text-sm transition-colors text-center",children:e("footer.privacyPolicy")}),a.jsx(r,{to:"/terms-of-service",className:"text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 text-xs sm:text-sm transition-colors text-center",children:e("footer.termsOfService")})]})]})]})})},za=({children:e,adminOnly:t=!1,clientOnly:s=!1})=>{const{user:r}=wa(),d=l();return r?t&&"admin"!==(null==r?void 0:r.rol)||s&&"client"!==(null==r?void 0:r.rol)?a.jsx(i,{to:"/",replace:!0}):e:a.jsx(i,{to:"/login",state:{from:d},replace:!0})};za.propTypes={children:ze.node.isRequired,adminOnly:ze.bool,clientOnly:ze.bool};const $a=({size:e="md",color:t="primary",className:s="",text:r=null})=>{const l={primary:"text-primary",secondary:"text-secondary",accent:"text-accent",white:"text-white",gray:"text-gray-500"};return a.jsxs("div",{className:`flex flex-col items-center justify-center ${s}`,children:[a.jsxs("svg",{className:`animate-spin ${{xs:"w-4 h-4",sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12",xl:"w-16 h-16"}[e]} ${l[t]}`,fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r&&a.jsx("p",{className:`mt-2 text-sm ${l[t]} animate-pulse`,children:r})]})};$a.propTypes={size:ze.oneOf(["xs","sm","md","lg","xl"]),color:ze.oneOf(["primary","secondary","accent","white","gray"]),className:ze.string,text:ze.string};const qa=({isOpen:t,onClose:s,payment:r,onConfirm:l})=>{const[i,d]=e.useState(null),[n,o]=e.useState("");return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50",children:a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg m-4 transform transition-all",children:[a.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Realizar Pago"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700/50 p-4 rounded-lg space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Concepto:"}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:null==r?void 0:r.concepto})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Monto:"}),a.jsxs("span",{className:"font-bold text-xl text-violet-600 dark:text-violet-400",children:["$",null==r?void 0:r.monto.toLocaleString()]})]})]}),i?"PayPal"===i?a.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/50 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Proceder con PayPal"}),a.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-300 mt-2",children:"Serás redirigido a PayPal para completar tu pago de forma segura."}),a.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"(Actualmente esto es una simulación. Al confirmar, el pago se marcará como pagado.)"})]}):a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-700 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-3",children:"Datos para la Transferencia"}),a.jsx("div",{className:"space-y-2 text-sm",children:Object.entries({bank:"Banco Ficticio S.A.",accountNumber:"1234-5678-9012-3456",beneficiary:"Boderless S.A. de C.V.",clabe:"012 345 67890123456 7"}).map(([e,t])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 capitalize",children:[e.replace(/([A-Z])/g," $1"),":"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:t}),a.jsx("button",{onClick:()=>{return e=t,void navigator.clipboard.writeText(e).then(()=>{alert("Copiado al portapapeles")});var e},className:"text-gray-400 hover:text-violet-500",children:a.jsx(w,{size:14})})]})]},e))}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("label",{htmlFor:"reference",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Número de Referencia ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{id:"reference",type:"text",value:n,onChange:e=>o(e.target.value),placeholder:"Ej: 987654321",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-800 dark:text-white"})]})]}):a.jsxs("div",{className:"text-center space-y-3 pt-4",children:[a.jsx("h3",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Seleccione un método de pago:"}),a.jsxs("div",{className:"flex justify-center gap-4",children:[a.jsxs("button",{onClick:()=>d("PayPal"),className:"flex flex-col items-center justify-center p-4 border-2 border-transparent rounded-lg bg-blue-500 text-white w-40 h-24 hover:bg-blue-600 transition-all",children:[a.jsx(N,{className:"w-8 h-8 mb-1"}),a.jsx("span",{className:"font-bold",children:"PayPal"})]}),a.jsxs("button",{onClick:()=>d("Transferencia Bancaria"),className:"flex flex-col items-center justify-center p-4 border-2 border-transparent rounded-lg bg-gray-600 text-white w-40 h-24 hover:bg-gray-700 transition-all",children:[a.jsx(k,{className:"w-8 h-8 mb-1"}),a.jsx("span",{className:"font-bold",children:"Transferencia"})]})]})]})]}),a.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-slate-900/50 border-t flex justify-between items-center",children:[a.jsx("button",{type:"button",onClick:i?()=>d(null):s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg",children:i?"Atrás":"Cancelar"}),i&&a.jsxs("button",{type:"button",onClick:()=>{"Transferencia Bancaria"!==i||n?l({metodo:i,referencia_transferencia:n}):alert("Por favor, ingrese el número de referencia.")},className:"px-6 py-2 bg-green-600 text-white rounded-lg flex items-center gap-2 hover:bg-green-700 transition-colors",children:[a.jsx(b,{className:"w-5 h-5"}),"PayPal"===i?"Confirmar Pago":"Hecho, Notificar Pago"]})]})]})}):null};function Da(){const[t,s]=e.useState([]),[r,l]=e.useState([]),[i,d]=e.useState(!0),[n,o]=e.useState(null),[c,x]=e.useState("pedidos"),[m,g]=e.useState(""),[u,h]=e.useState("todos"),[y,j]=e.useState(!1),[f,v]=e.useState(null),k=e=>{v(e),j(!0)},w=()=>{j(!1),v(null)};e.useEffect(()=>{(async()=>{try{const[e,a]=await Promise.all([Ke(),ea()]),t=e.data.data||e.data||[],r=a.data.data||a.data||[],i=t.map(e=>{const a=r.find(a=>a.pedido_id===e.id&&"pendiente"===a.estado.toLowerCase());return{...e,pendingPayment:a}});s(i),l(r)}catch(e){o("Error al cargar los datos"),Le.setContext("ClientPanel").error("Error in ClientPanel:",e)}finally{d(!1)}})()},[]);const z=e=>{switch(e.toLowerCase()){case"completado":case"pagado":return a.jsx(b,{className:"w-5 h-5 text-green-500"});case"en_proceso":return a.jsx(O,{className:"w-5 h-5 text-blue-500"});case"pendiente":return a.jsx(p,{className:"w-5 h-5 text-yellow-500"});case"vencido":return a.jsx(C,{className:"w-5 h-5 text-red-500"});default:return a.jsx(p,{className:"w-5 h-5 text-gray-500"})}},$=e=>{switch(e.toLowerCase()){case"completado":case"pagado":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"en_proceso":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pendiente":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"vencido":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},q=e=>{switch(null==e?void 0:e.toLowerCase()){case"alta":return"bg-red-500";case"normal":return"bg-yellow-500";case"baja":return"bg-green-500";default:return"bg-gray-500"}},D=t.filter(e=>{const a=e.descripcion.toLowerCase().includes(m.toLowerCase()),t="todos"===u||e.estado.toLowerCase()===u.toLowerCase();return a&&t}),M=r.filter(e=>{const a=e.concepto.toLowerCase().includes(m.toLowerCase()),t="todos"===u||e.estado.toLowerCase()===u.toLowerCase();return a&&t});return i?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Cargando datos..."})]})}):n?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(C,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("p",{className:"text-red-600 dark:text-red-400",children:n})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Panel del Cliente"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Gestiona tus pedidos y pagos desde un solo lugar"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-indigo-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pedidos"}),a.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400",children:t.length})]}),a.jsx(S,{className:"w-8 h-8 text-indigo-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completados"}),a.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:t.filter(e=>"completado"===e.estado.toLowerCase()).length})]}),a.jsx(b,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Pagos"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:["$",r.reduce((e,a)=>e+parseFloat(a.monto||0),0).toLocaleString()]})]}),a.jsx(P,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-red-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pedidos Pendientes"}),a.jsx("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:t.filter(e=>"pendiente"===e.estado.toLowerCase()||"en_proceso"===e.estado.toLowerCase()).length})]}),a.jsx(p,{className:"w-8 h-8 text-red-500"})]})})]}),a.jsxs("div",{className:"flex space-x-1 mb-8 bg-gray-100 dark:bg-slate-700 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>x("pedidos"),className:"flex items-center px-4 py-2 rounded-md font-medium transition-all "+("pedidos"===c?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-400 shadow":"text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"),children:[a.jsx(S,{className:"w-4 h-4 mr-2"}),"Pedidos"]}),a.jsxs("button",{onClick:()=>x("pagos"),className:"flex items-center px-4 py-2 rounded-md font-medium transition-all "+("pagos"===c?"bg-white dark:bg-slate-600 text-indigo-600 dark:text-indigo-400 shadow":"text-gray-600 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400"),children:[a.jsx(N,{className:"w-4 h-4 mr-2"}),"Pagos"]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(E,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:m,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-slate-800 dark:text-white"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_,{className:"w-5 h-5 text-gray-400"}),a.jsxs("select",{value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent dark:bg-slate-800 dark:text-white",children:[a.jsx("option",{value:"todos",children:"Todos"}),a.jsx("option",{value:"completado",children:"Completado"}),a.jsx("option",{value:"en_proceso",children:"En progreso"}),a.jsx("option",{value:"pendiente",children:"Pendiente"}),a.jsx("option",{value:"pagado",children:"Pagado"}),a.jsx("option",{value:"vencido",children:"Vencido"})]})]})]}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg overflow-hidden",children:"pedidos"===c?a.jsxs("div",{children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx(S,{className:"w-5 h-5 mr-2"}),"Pedidos (",D.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Descripción"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Prioridad"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Valor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha de Entrega Estimada"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:D.map(e=>{var t,s;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.descripcion})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[z(e.estado),a.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${$(e.estado)}`,children:e.estado})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${q(e.prioridad)}`}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.prioridad})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["$",null==(t=e.valor)?void 0:t.toLocaleString()]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),e.fecha_entrega_estimada?new Date(e.fecha_entrega_estimada).toLocaleDateString():"N/A"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:a.jsx(A,{className:"w-4 h-4"})}),a.jsx("button",{className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300",children:a.jsx(R,{className:"w-4 h-4"})}),e.pendingPayment&&a.jsx("button",{onClick:()=>k(e.pendingPayment),className:"px-3 py-1 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors",children:"Pagar"}),"completado"===e.estado.toLowerCase()&&e.valor&&!e.pendingPayment&&(s=e.id,!r.some(e=>e.pedido_id===s&&"pagado"===e.estado.toLowerCase()))&&a.jsx("button",{onClick:()=>(e=>{const a={id:`temp-payment-${e.id}`,pedido_id:e.id,concepto:`Pago por: ${e.descripcion}`,monto:e.valor,estado:"pendiente",fecha_pago:(new Date).toISOString()};k(a)})(e),className:"px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:"Pagar ahora"})]})})]},e.id)})})]})})]}):a.jsxs("div",{children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx(N,{className:"w-5 h-5 mr-2"}),"Pagos (",M.length,")"]})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Concepto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Monto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:M.map(e=>a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.concepto})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",e.monto.toLocaleString()]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[z(e.estado),a.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${$(e.estado)}`,children:e.estado})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),e.fecha_pago?new Date(e.fecha_pago).toLocaleDateString():"N/A"]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300",children:a.jsx(A,{className:"w-4 h-4"})}),a.jsx("button",{className:"text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-300",children:a.jsx(R,{className:"w-4 h-4"})}),"pendiente"===e.estado.toLowerCase()&&a.jsx("button",{onClick:()=>k(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",children:"Pagar"})]})})]},e.id))})]})})]})}),a.jsx(qa,{isOpen:y,onClose:w,payment:f,onConfirm:async e=>{if(f)try{const a={...f,metodo:e.metodo,referencia_transferencia:e.referencia_transferencia};let t;if(String(a.id).startsWith("temp-")){const{data:e}=await(e=>Ue.post("/api/client-payments",e))({pedido_id:a.pedido_id,monto:a.monto,concepto:a.concepto,metodo:a.metodo,referencia_transferencia:a.referencia_transferencia});t=e,l(e=>[...e,t])}else{const{data:e}=await((e,a)=>Ue.put(`/api/client-payments/${e}`,a))(a.id,{metodo:a.metodo,referencia_transferencia:a.referencia_transferencia});t=e,l(r.map(e=>e.id===a.id?t:e))}const i=(await Ke()).data,d=(await ea()).data,n=i.map(e=>{const a=d.find(a=>a.pedido_id===e.id&&"pendiente"===a.estado.toLowerCase());return{...e,pendingPayment:a}});s(n),l(d),w()}catch(a){o("Error al procesar el pago. Por favor, inténtelo de nuevo."),Le.setContext("ClientPanel").error("Error in ClientPanel:",a)}}})]})})}qa.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,payment:ze.shape({concepto:ze.string,monto:ze.number}),onConfirm:ze.func.isRequired};const Ma=({children:e,className:t="",variant:s="default",hover:r=!0,padding:l="default",shadow:i="default",borderRadius:d="default",...n})=>{const o=["transition-all duration-300 ease-in-out",{default:"bg-white dark:bg-ghost-800/80 border border-ghost-200 dark:border-ghost-600/30",glass:"bg-white/70 dark:bg-ghost-800/50 backdrop-blur-md border border-white/20 dark:border-ghost-600/20",gradient:"bg-gradient-to-br from-white to-ghost-50 dark:from-ghost-800/80 dark:to-ghost-900/60 border border-ghost-200 dark:border-ghost-600/30",accent:"bg-gradient-to-br from-ghost-100/50 to-ghost-200/30 dark:from-ghost-700/20 dark:to-ghost-800/30 border border-ghost-300/30 dark:border-ghost-600/40"}[s],{true:"hover:shadow-xl hover:-translate-y-1 hover:scale-[1.02]",false:""}[r],{none:"",sm:"p-4",default:"p-6",lg:"p-8",xl:"p-10"}[l],{none:"",sm:"shadow-sm",default:"shadow-lg",lg:"shadow-xl",xl:"shadow-2xl"}[i],{none:"",sm:"rounded-md",default:"rounded-xl",lg:"rounded-2xl",full:"rounded-full"}[d],t].filter(Boolean).join(" ");return a.jsx("div",{className:o,...n,children:e})};Ma.propTypes={children:ze.node.isRequired,className:ze.string,variant:ze.oneOf(["default","glass","gradient","accent"]),hover:ze.bool,padding:ze.oneOf(["none","sm","default","lg","xl"]),shadow:ze.oneOf(["none","sm","default","lg","xl"]),borderRadius:ze.oneOf(["none","sm","default","lg","full"])},ze.string,ze.string,ze.string,ze.string,ze.func,ze.string,ze.bool,ze.bool,ze.string,ze.node,ze.oneOf(["left","right"]);const La=({className:e="",variant:t="rectangular",width:s="full",height:r="auto",animated:l=!0})=>{const i=["bg-gray-200 dark:bg-gray-700",{text:"rounded",rectangular:"rounded-md",circular:"rounded-full",rounded:"rounded-lg"}[t],{auto:"w-auto",full:"w-full","1/2":"w-1/2","1/3":"w-1/3","2/3":"w-2/3","1/4":"w-1/4","3/4":"w-3/4"}[s],{auto:"h-auto",4:"h-4",6:"h-6",8:"h-8",10:"h-10",12:"h-12",16:"h-16",20:"h-20",24:"h-24",32:"h-32"}[r],l?"animate-pulse":"",e].filter(Boolean).join(" ");return a.jsx("div",{className:i})};La.propTypes={className:ze.string,variant:ze.oneOf(["text","rectangular","circular","rounded"]),width:ze.oneOf(["auto","full","1/2","1/3","2/3","1/4","3/4"]),height:ze.oneOf(["auto","4","6","8","10","12","16","20","24","32"]),animated:ze.bool},ze.string,ze.number,ze.string;const Ia=({isOpen:t,onToggle:s,onOptionSelect:r,activeOption:i})=>{const[n,o]=e.useState("dashboard"),c=d(),x=l();return e.useEffect(()=>{const e=x.pathname;["/cotizaciones","/pedidos","/historial"].includes(e)?o("orders"):"/admin/dashboard"===e&&o("clients")},[x.pathname]),a.jsxs(a.Fragment,{children:[t&&a.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:s}),a.jsxs("aside",{className:`\n        fixed top-20 left-0 z-40 h-[calc(100vh-5rem)] w-80 \n        backdrop-blur-xl bg-white/30 dark:bg-slate-800/30 \n        border-r border-white/20 dark:border-slate-700/30 \n        transform transition-transform duration-300 ease-in-out\n        ${t?"translate-x-0":"-translate-x-full"}\n        lg:translate-x-0 lg:static lg:z-auto lg:h-[calc(100vh-5rem)]\n      `,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20 dark:border-slate-700/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"A"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Admin Panel"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Panel de Control"})]})]}),a.jsx("button",{onClick:s,className:"lg:hidden p-2 rounded-lg hover:bg-white/20 dark:hover:bg-slate-700/20 transition-colors","aria-label":"Cerrar menú de navegación",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:a.jsx("div",{className:"space-y-2",children:[{id:"dashboard",title:"Panel Principal",icon:"📊",links:[{id:"overview",label:"Resumen General",icon:"📋"},{id:"analytics",label:"Análisis Avanzado",icon:"📊"},{id:"quick-stats",label:"Estadísticas Rápidas",icon:"⚡"}]},{id:"orders",title:"Pedidos & Cotizaciones",icon:"📦",links:[{id:"cotizaciones",label:"Cotizaciones",icon:"📝"},{id:"pedidos",label:"Pedidos",icon:"📦"},{id:"historial",label:"Historial",icon:"📚"}]},{id:"clients",title:"Clientes",icon:"👥",links:[{id:"ver-clientes",label:"Listar Clientes",icon:"👥"},{id:"nuevo-cliente",label:"Nuevo Cliente",icon:"➕"},{id:"estadisticas-clientes",label:"Estadísticas",icon:"📈"}]},{id:"financial",title:"Finanzas",icon:"💰",links:[{id:"pagos-finanzas",label:"Gestión de Pagos",icon:"💳"},{id:"reportes-finanzas",label:"Reportes Financieros",icon:"📊"},{id:"facturas-finanzas",label:"Facturación",icon:"🧾"}]},{id:"communication",title:"Comunicación",icon:"💬",links:[{id:"notificaciones-comm",label:"Notificaciones",icon:"🔔"},{id:"mensajes-comm",label:"Mensajes",icon:"💬"},{id:"emails-comm",label:"Email Marketing",icon:"📧"}]},{id:"content",title:"Contenido",icon:"🎨",links:[{id:"proyectos-admin",label:"Portfolio",icon:"🖼️"}]},{id:"settings",title:"Configuración",icon:"⚙️",links:[{id:"configuracion-general",label:"General",icon:"🛠️"},{id:"integraciones",label:"Integraciones",icon:"🔌"},{id:"seguridad",label:"Seguridad",icon:"🔒"}]}].map(e=>a.jsxs("div",{className:"mb-4",children:[a.jsxs("button",{onClick:()=>{e.isAlwaysOpen||o(n===e.id?"":e.id)},className:`flex items-center justify-between w-full text-left p-3 rounded-xl\n                           ${e.isAlwaysOpen?"bg-gradient-to-r from-blue-500/20 to-blue-600/20 border border-blue-500/30":"bg-white/10 dark:bg-slate-700/20 hover:bg-white/20 dark:hover:bg-slate-700/30"}\n                           transition-all duration-200 group`,disabled:e.isAlwaysOpen,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-xl",children:e.icon}),a.jsx("span",{className:"font-semibold "+(e.isAlwaysOpen?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"),children:e.title})]}),!e.isAlwaysOpen&&a.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400 transform transition-transform duration-200 "+(n===e.id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(e.isAlwaysOpen||n===e.id)&&a.jsx("div",{className:"mt-2 space-y-1",children:e.links.map(t=>a.jsxs("button",{onClick:()=>{t.route?c(t.route):r&&r(t.id,t.label,e.title),window.innerWidth<1024&&s()},className:"flex items-center w-full px-4 py-3 ml-2 rounded-lg text-sm font-medium transition-all duration-200 group "+(i===t.id?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg transform scale-[1.02]":"text-gray-700 dark:text-gray-300 hover:bg-white/20 dark:hover:bg-slate-700/30 hover:translate-x-1"),children:[a.jsx("span",{className:"mr-3 text-base",children:t.icon}),a.jsx("span",{className:"flex-1 text-left",children:t.label}),i===t.id&&a.jsx("div",{className:"w-2 h-2 rounded-full bg-white/80 animate-pulse"})]},t.id))})]},e.id))})}),a.jsx("div",{className:"p-6 border-t border-white/20 dark:border-slate-700/30",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Admin Dashboard v2.0"})})})]})]})};Ia.propTypes={isOpen:ze.bool.isRequired,onToggle:ze.func.isRequired,onOptionSelect:ze.func,activeOption:ze.string};const Fa=({isOpen:t,onToggle:s,onOptionSelect:r})=>{const[l,i]=e.useState("dashboard");return a.jsxs(a.Fragment,{children:[t&&a.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-40 lg:hidden",onClick:s}),a.jsxs("aside",{className:`\n        fixed top-20 left-0 z-40 h-[calc(100vh-5rem)] w-80 \n        backdrop-blur-xl bg-white/30 dark:bg-slate-800/30 \n        border-r border-white/20 dark:border-slate-700/30 \n        transform transition-transform duration-300 ease-in-out\n        ${t?"translate-x-0":"-translate-x-full"}\n        lg:translate-x-0 lg:static lg:z-auto lg:h-[calc(100vh-5rem)]\n        block\n      `,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20 dark:border-slate-700/30",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:"C"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Mi Panel"}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Panel de Cliente"})]})]}),a.jsx("button",{onClick:s,className:"lg:hidden p-2 rounded-lg hover:bg-white/20 dark:hover:bg-slate-700/20 transition-colors","aria-label":"Cerrar menú de navegación",children:a.jsx("svg",{className:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("nav",{className:"flex-1 overflow-y-auto p-6",children:a.jsx("div",{className:"space-y-6",children:[{id:"dashboard",title:"Mi Panel",icon:"📊",links:[{action:"dashboard",label:"Dashboard",icon:"📊"},{action:"profile",label:"Mi Perfil",icon:"👤"}]},{id:"projects",title:"Mis Proyectos",icon:"📋",links:[{action:"quotes",label:"Mis Cotizaciones",icon:"📋"},{action:"orders",label:"Mis Pedidos",icon:"📦"},{action:"new-request",label:"Nueva Solicitud",icon:"➕"}]},{id:"financial",title:"Finanzas",icon:"💰",links:[{action:"payments",label:"Mis Pagos",icon:"💰"},{action:"invoices",label:"Facturas",icon:"🧾"}]},{id:"communication",title:"Comunicación",icon:"💬",links:[{action:"notifications",label:"Notificaciones",icon:"🔔"},{action:"messages",label:"Mensajes",icon:"💬"},{action:"support",label:"Soporte",icon:"🆘"}]}].map(e=>a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>i(l===e.id?"":e.id),className:"flex items-center justify-between w-full text-left p-3 rounded-lg\n                           bg-white/20 dark:bg-slate-700/20 hover:bg-white/30 dark:hover:bg-slate-700/30\n                           transition-colors duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:e.icon}),a.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:e.title})]}),a.jsx("svg",{className:"w-4 h-4 text-gray-600 dark:text-gray-400 transform transition-transform "+(l===e.id?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l===e.id&&a.jsx("div",{className:"mt-2 ml-6 space-y-1",children:e.links.map(e=>a.jsxs("button",{onClick:()=>{r&&r(e.action),window.innerWidth<1024&&s()},className:"flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 text-gray-700 dark:text-gray-300 hover:bg-white/20 dark:hover:bg-slate-700/20 w-full text-left",children:[a.jsx("span",{className:"mr-3",children:e.icon}),e.label]},e.action))})]},e.id))})}),a.jsx("div",{className:"p-6 border-t border-white/20 dark:border-slate-700/30",children:a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Cliente Dashboard v2.0"})})})]})]})};Fa.propTypes={isOpen:ze.bool.isRequired,onToggle:ze.func.isRequired,onOptionSelect:ze.func};const Ba=({children:t,onSidebarOptionSelect:s})=>{const{user:r}=wa(),i=l(),[d,n]=e.useState(!1),o=()=>{n(!d)};if(!r)return t;const c="admin"===r.rol;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 pt-20",children:a.jsxs("div",{className:"flex",children:[c?a.jsx(Ia,{isOpen:d,onToggle:o,onOptionSelect:s||(()=>{}),activeOption:(()=>{switch(i.pathname){case"/cotizaciones":return"cotizaciones";case"/pedidos":return"pedidos";case"/historial":return"historial";case"/ver-clientes":return"ver-clientes";case"/nuevo-cliente":return"nuevo-cliente";case"/estadisticas-clientes":return"estadisticas-clientes";case"/pagos-finanzas":return"pagos-finanzas";case"/reportes-finanzas":return"reportes-finanzas";case"/facturas-finanzas":return"facturas-finanzas";case"/notificaciones-comm":return"notificaciones-comm";case"/mensajes-comm":return"mensajes-comm";case"/emails-comm":return"emails-comm";case"/proyectos-admin":return"proyectos-admin";case"/configuracion-general":return"configuracion-general";case"/integraciones":return"integraciones";case"/seguridad":return"seguridad";default:return""}})()}):a.jsx(Fa,{isOpen:d,onToggle:o,onOptionSelect:s}),a.jsxs("main",{className:"flex-1 transition-all duration-300 "+(c?"lg:ml-0":"lg:ml-80"),children:[a.jsx("div",{className:"lg:hidden fixed top-20 left-4 z-30",children:a.jsx("button",{onClick:o,className:"p-2 rounded-lg backdrop-blur-xl bg-white/30 dark:bg-slate-800/30 \n                       border border-white/20 dark:border-slate-700/30 shadow-lg\n                       hover:bg-white/40 dark:hover:bg-slate-800/40 transition-colors","aria-label":"Abrir menú de navegación",children:a.jsx("svg",{className:"w-6 h-6 text-gray-700 dark:text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),a.jsx("div",{className:"min-h-screen",children:a.jsx("div",{className:"mx-auto px-12 py-6",style:{maxWidth:"1200px"},children:t})})]})]})})};Ba.propTypes={children:ze.node.isRequired,onSidebarOptionSelect:ze.func};const Va={servicio:"",descripcion:""};function Ua({onSubmit:t}){const[s,r]=e.useState(Va),[l,i]=e.useState(!1),[d,n]=e.useState(""),[o,c]=e.useState({}),x=e=>{r({...s,[e.target.name]:e.target.value})};return a.jsxs("section",{className:"min-h-screen py-12 px-4 md:px-0 flex justify-center items-center relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-50 via-blue-50 to-cyan-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900"}),a.jsx("div",{className:"absolute top-20 left-20 w-32 h-32 bg-gradient-to-br from-blue-200/30 to-cyan-200/30 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-20 right-20 w-40 h-40 bg-gradient-to-br from-cyan-200/30 to-blue-200/30 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute top-1/2 left-1/3 w-24 h-24 bg-gradient-to-br from-slate-200/20 to-blue-200/20 rounded-full blur-2xl"}),a.jsx("div",{className:"relative z-10 w-full max-w-lg",children:a.jsx("div",{className:"backdrop-blur-xl bg-white/30 dark:bg-slate-800/30 rounded-2xl border border-white/20 dark:border-slate-700/20 shadow-2xl p-8",children:a.jsxs("form",{onSubmit:async e=>{e.preventDefault();const a=(()=>{const e={};return s.servicio||(e.servicio="Selecciona un servicio."),s.descripcion||(e.descripcion="La descripción es obligatoria."),e})();if(c(a),Object.keys(a).length>0)n("Por favor, corrige los errores.");else{n(""),i(!1);try{const e=await Ue.post("/api/orders",s);i(!0),r(Va),t&&t(e.data)}catch(l){n("Hubo un error al enviar la solicitud. Inténtalo de nuevo más tarde.")}}},"aria-label":"Formulario de solicitud de proyecto",className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-light text-slate-800 dark:text-slate-200 mb-2",children:"Solicita tu proyecto"}),a.jsx("div",{className:"w-16 h-0.5 bg-gradient-to-r from-blue-500 to-cyan-500 mx-auto rounded-full"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{htmlFor:"servicio",className:"block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300",children:["Servicio ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{name:"servicio",id:"servicio",value:s.servicio||"",onChange:x,className:"w-full px-4 py-3 rounded-xl backdrop-blur-sm bg-white/50 dark:bg-slate-700/50 border border-white/30 dark:border-slate-600/30 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all duration-200 text-slate-800 dark:text-slate-200",required:!0,children:[a.jsx("option",{value:"",children:"Selecciona un servicio"}),a.jsx("option",{value:"desarrollo-web",children:"Desarrollo Web"}),a.jsx("option",{value:"aplicaciones-a-medida",children:"Aplicaciones a Medida"}),a.jsx("option",{value:"e-commerce",children:"E-commerce"}),a.jsx("option",{value:"integraciones-y-apis",children:"Integraciones y APIs"}),a.jsx("option",{value:"soporte-y-mantenimiento",children:"Soporte y Mantenimiento"})]}),o.servicio&&a.jsx("span",{className:"text-red-500 text-sm mt-1 block",children:o.servicio})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{htmlFor:"descripcion",className:"block text-sm font-medium mb-2 text-slate-700 dark:text-slate-300",children:["Descripción del proyecto ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("textarea",{id:"descripcion",name:"descripcion",value:s.descripcion,onChange:x,className:"w-full px-4 py-3 rounded-xl backdrop-blur-sm bg-white/50 dark:bg-slate-700/50 border border-white/30 dark:border-slate-600/30 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-transparent transition-all duration-200 placeholder-slate-400 dark:placeholder-slate-400 text-slate-800 dark:text-slate-200 resize-none",rows:4,required:!0}),o.descripcion&&a.jsx("span",{className:"text-red-500 text-sm mt-1 block",children:o.descripcion})]})]}),d&&a.jsx("div",{className:"p-4 rounded-xl bg-red-100/50 dark:bg-red-900/20 border border-red-200/30 dark:border-red-800/30 backdrop-blur-sm",children:a.jsx("p",{className:"text-red-700 dark:text-red-400 text-sm",children:d})}),l&&a.jsx("div",{className:"p-4 rounded-xl bg-green-100/50 dark:bg-green-900/20 border border-green-200/30 dark:border-green-800/30 backdrop-blur-sm",children:a.jsx("p",{className:"text-green-700 dark:text-green-400 text-sm",children:"¡Solicitud enviada correctamente!"})}),a.jsx("button",{type:"submit",className:"w-full py-4 px-6 rounded-xl bg-gradient-to-r from-blue-500 to-cyan-500 text-white font-medium shadow-lg hover:from-blue-600 hover:to-cyan-600 focus:outline-none focus:ring-2 focus:ring-blue-500/50 transform hover:scale-[1.01] transition-all duration-200 backdrop-blur-sm",children:"Enviar solicitud"})]})})})]})}Ua.propTypes={onSubmit:ze.func};const Ga=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),Wa=()=>{const e=d(),t=l(),s=[{id:"quotes",label:"Cotizaciones",path:"/cotizaciones",icon:z,description:"Gestionar solicitudes de cotización"},{id:"orders",label:"Pedidos",path:"/pedidos",icon:S,description:"Administrar proyectos y órdenes"},{id:"history",label:"Historial",path:"/historial",icon:$,description:"Ver historial completo"}],r=t.pathname;return a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-6 mb-8",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"📊 Sección: Pedidos y Cotizaciones"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Navega entre los diferentes módulos de gestión de proyectos"})]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:s.map((t,l)=>{const i=t.icon,d=r===t.path;return a.jsxs("div",{className:"flex items-center",children:[a.jsxs("button",{onClick:()=>e(t.path),className:"flex items-center gap-3 px-4 py-2 rounded-lg transition-all duration-200 group "+(d?"bg-violet-600 text-white shadow-lg scale-105":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-violet-100 dark:hover:bg-slate-600 hover:text-violet-700 dark:hover:text-violet-300"),title:t.description,children:[a.jsx(i,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:t.label}),d&&a.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})]}),l<s.length-1&&a.jsx(q,{className:"w-4 h-4 text-gray-400 mx-2 hidden sm:block"})]},t.id)})})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[a.jsx("span",{children:"Estás en:"}),s.map(e=>{if(r===e.path){const t=e.icon;return a.jsxs("div",{className:"flex items-center gap-2 text-violet-600 dark:text-violet-400 font-medium",children:[a.jsx(t,{className:"w-4 h-4"}),a.jsx("span",{children:e.label}),a.jsxs("span",{className:"text-gray-500",children:["- ",e.description]})]},e.id)}return null})]})})]})},Ha=({stats:e,formatCurrency:t})=>{const s=[{title:"Total Clientes",value:e.totalClients||0,color:"text-blue-600",subtitle:`+${e.newClientsThisMonth||0} este mes`,subtitleColor:"text-green-600"},{title:"Ingresos del Mes",value:t(e.monthlyRevenue||0),color:"text-green-600",subtitle:"↗️ +15% vs mes anterior",subtitleColor:"text-green-600"},{title:"Proyectos Activos",value:e.activeProjects||0,color:"text-yellow-600",subtitle:`${e.pendingQuotes||0} cotizaciones pendientes`,subtitleColor:"text-blue-600"},{title:"Proyectos Completados",value:e.completedProjects||0,color:"text-purple-600",subtitle:`Promedio: ${t(e.averageProjectValue||0)}`,subtitleColor:"text-ghost-600 dark:text-ghost-400"}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:s.map((e,t)=>a.jsxs(Ma,{variant:"gradient",className:"text-center group hover:scale-105 transition-transform",children:[a.jsx("div",{className:`text-4xl font-bold ${e.color} mb-2`,children:e.value}),a.jsx("div",{className:"text-sm text-ghost-600 dark:text-ghost-400",children:e.title}),a.jsx("div",{className:`text-xs mt-1 ${e.subtitleColor}`,children:e.subtitle})]},t))})};Ha.propTypes={stats:ze.object.isRequired,formatCurrency:ze.func.isRequired};const Xa=({stats:t,formatCurrency:s,className:r=""})=>{const[l,i]=e.useState("month"),[d,n]=e.useState({}),[o,c]=e.useState({});e.useEffect(()=>{(async()=>{var e,a;try{const[t,s]=await Promise.all([Ue.get("/api/stats/monthly?months=2"),Ue.get("/api/stats/growth?months=6")]);if(null==(e=t.data)?void 0:e.success){const e=t.data.data;if(e.length>=2){const a=e[0],t=e[1],s=t.revenue>0?((a.revenue-t.revenue)/t.revenue*100).toFixed(1):0,r=t.newClients>0?((a.newClients-t.newClients)/t.newClients*100).toFixed(1):0;c({revenueGrowth:parseFloat(s),clientGrowth:parseFloat(r),previousRevenue:t.revenue,previousClients:t.newClients})}}null==(a=s.data)||a.success}catch(t){}})()},[]),e.useEffect(()=>{const e=(e,a)=>{let t=d[e]||0;const s=Date.now(),r=()=>{const l=Date.now()-s,i=Math.min(l/1500,1),d=1-Math.pow(1-i,4),o=t+(a-t)*d;n(a=>({...a,[e]:Math.round(o)})),i<1&&requestAnimationFrame(r)};requestAnimationFrame(r)};void 0!==t.totalClients&&(e("totalClients",t.totalClients),e("activeProjects",t.activeProjects||0),e("completedProjects",t.completedProjects||0),e("monthlyRevenue",t.monthlyRevenue||0))},[t,d]);const x=[{id:"growth",title:"Crecimiento",metrics:[{label:"Nuevos Clientes",value:t.newClientsThisMonth||0,change:void 0!==o.clientGrowth?`${o.clientGrowth>=0?"+":""}${o.clientGrowth}% vs mes anterior`:`Total: ${t.totalClients||0}`,trend:o.clientGrowth>=0?"up":"down",icon:D,color:"text-blue-600 dark:text-blue-400"},{label:"Ingresos del Mes",value:s(d.monthlyRevenue||0),change:void 0!==o.revenueGrowth?`${o.revenueGrowth>=0?"+":""}${o.revenueGrowth}% vs mes anterior`:"Sin datos previos",trend:o.revenueGrowth>=0?"up":"down",icon:P,color:"text-green-600 dark:text-green-400"}]},{id:"performance",title:"Rendimiento",metrics:[{label:"Tasa de Conversión",value:t.totalClients>0?(t.completedProjects/t.totalClients*100).toFixed(1)+"%":"0%",change:t.pendingQuotes>0?`${t.pendingQuotes} pendientes`:"Sin pendientes",trend:t.completedProjects>t.activeProjects?"up":"down",icon:M,color:"text-purple-600 dark:text-purple-400"},{label:"Valor Promedio Proyecto",value:s(t.averageProjectValue||0),change:t.completedProjects>0?`${t.completedProjects} completados`:"Sin datos",trend:"up",icon:L,color:"text-orange-600 dark:text-orange-400"}]},{id:"efficiency",title:"Eficiencia",metrics:[{label:"Proyectos Activos",value:d.activeProjects||0,change:`vs ${t.completedProjects||0} completados`,trend:t.activeProjects>0?"up":"down",icon:T,color:"text-yellow-600 dark:text-yellow-400"},{label:"Pagos Pendientes",value:s(t.pendingPayments||0),change:t.pendingPayments>0?"Requiere atención":"Todo al día",trend:t.pendingPayments>0?"down":"up",icon:P,color:t.pendingPayments>0?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400"}]}];return a.jsxs("div",{className:`space-y-6 ${r}`,children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Estadísticas Avanzadas"}),a.jsx("div",{className:"flex space-x-2",children:["week","month","quarter","year"].map(e=>a.jsx("button",{onClick:()=>i(e),className:"px-3 py-1 text-sm font-medium rounded-lg transition-colors "+(l===e?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:"week"===e?"Semana":"month"===e?"Mes":"quarter"===e?"Trimestre":"Año"},e))})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:x.map(e=>a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-sm hover:shadow-md transition-all duration-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 border-b border-gray-100 dark:border-gray-700 pb-2",children:e.title}),a.jsx("div",{className:"space-y-4",children:e.metrics.map((e,t)=>{const s=e.icon,r="up"===e.trend;return a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(s,{className:`w-4 h-4 ${e.color}`}),a.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e.label})]}),a.jsx("div",{className:"flex items-center space-x-1",children:"up"===e.trend?a.jsx(L,{className:"w-3 h-3 text-green-500"}):"down"===e.trend?a.jsx(I,{className:"w-3 h-3 text-red-500"}):null})]}),a.jsxs("div",{className:"flex items-baseline justify-between",children:[a.jsx("span",{className:`text-2xl font-bold ${e.color} group-hover:scale-105 transition-transform`,children:e.value}),a.jsx("span",{className:"text-xs font-medium "+(r?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"),children:e.change})]}),a.jsx("div",{className:"mt-2 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:a.jsx("div",{className:"h-1.5 rounded-full transition-all duration-1000 "+(r?"bg-green-500":"bg-blue-500"),style:{width:`${Math.min(Math.max(("number"==typeof e.value?e.value:parseInt(e.value)||0)/100*100,10),100)}%`}})})]},t)})})]},e.id))}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-xl p-6 border border-blue-200 dark:border-blue-800",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[a.jsx(L,{className:"w-5 h-5 mr-2 text-blue-600"}),"Resumen Ejecutivo"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:[(t.completedProjects/Math.max(t.totalClients,1)*100).toFixed(0),"%"]}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tasa de Éxito"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:s((t.monthlyRevenue||0)/Math.max(t.completedProjects,1))}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingreso por Proyecto"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:t.activeProjects+t.completedProjects}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total de Proyectos"})]})]})]})]})};Xa.propTypes={stats:ze.object.isRequired,formatCurrency:ze.func.isRequired,className:ze.string};const Ya=({stats:t,recentActivity:s,formatCurrency:r})=>{const[l,i]=e.useState("revenue"),[d,n]=e.useState({}),[o,c]=e.useState(!0),[x,m]=e.useState("");e.useEffect(()=>{(async()=>{try{c(!0);const e=await Ue.get("/api/stats/monthly?months=6"),a=await Ue.get("/api/stats/growth?months=6");if(!e.data.success||!a.data.success)throw new Error("Error al obtener datos históricos");{const s=e.data.data,r=a.data.data,l=s.map(e=>({month:e.monthName,revenue:e.revenue,clients:e.newClients,projects:e.activeProjects})),i=r.map(e=>({month:e.monthName,accumulated:e.accumulatedClients,newClients:e.newClients}));n({revenue:l,projectsStatus:[{name:"Completados",value:t.completedProjects||0,color:"#10B981"},{name:"Activos",value:t.activeProjects||0,color:"#3B82F6"},{name:"Pendientes",value:t.pendingQuotes||0,color:"#F59E0B"}],clientsGrowth:i})}}catch(e){m("Error al cargar datos históricos"),n({})}finally{c(!1)}})()},[t]);const g=[{id:"revenue",label:"Ingresos",icon:L},{id:"projects",label:"Proyectos",icon:B},{id:"clients",label:"Clientes",icon:F}];return o?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[a.jsx(F,{className:"w-6 h-6 mr-2 text-blue-600"}),"Análisis Visual"]})}),a.jsxs("div",{className:"flex items-center justify-center h-64",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Cargando datos históricos..."})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[a.jsx(F,{className:"w-6 h-6 mr-2 text-blue-600"}),"Análisis Visual",x&&a.jsx("span",{className:"ml-2 text-xs text-yellow-600 bg-yellow-100 dark:bg-yellow-900/20 px-2 py-1 rounded",children:"Datos históricos limitados"})]}),a.jsxs("button",{onClick:()=>{const e={stats:t,chartData:d,exportDate:(new Date).toISOString(),type:l},a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`estadisticas-${l}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)},className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(R,{className:"w-4 h-4 mr-2"}),"Exportar Datos"]})]}),a.jsx("div",{className:"flex space-x-2 mb-6",children:g.map(e=>{const t=e.icon;return a.jsxs("button",{onClick:()=>i(e.id),className:"flex items-center px-4 py-2 rounded-lg font-medium transition-colors "+(l===e.id?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"),children:[a.jsx(t,{className:"w-4 h-4 mr-2"}),e.label]},e.id)})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:["revenue"===l&&"Evolución de Ingresos (6 meses)","projects"===l&&"Distribución de Proyectos","clients"===l&&"Crecimiento Acumulado de Clientes"]}),a.jsxs("div",{className:"flex justify-center",children:["revenue"===l&&d.revenue&&a.jsx(Ka,{type:"line",data:d.revenue,width:400,height:250}),"projects"===l&&d.projectsStatus&&a.jsx(Qa,{data:d.projectsStatus,width:300,height:250}),"clients"===l&&d.clientsGrowth&&a.jsx(Ka,{type:"line",data:d.clientsGrowth.map(e=>({month:e.month,revenue:e.accumulated,clients:e.newClients})),width:400,height:250})]})]}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center",children:[a.jsx(L,{className:"w-5 h-5 mr-2 text-green-600"}),"Insights Clave"]}),a.jsxs("div",{className:"space-y-4",children:["revenue"===l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[a.jsx("div",{className:"font-semibold text-green-800 dark:text-green-400",children:"Ingresos del Mes"}),a.jsx("div",{className:"text-2xl font-bold text-green-900 dark:text-green-300",children:r(t.monthlyRevenue||0)}),a.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:"Promedio mensual en los últimos 6 meses"})]}),a.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsx("div",{className:"font-semibold text-blue-800 dark:text-blue-400",children:"Proyección Anual"}),a.jsx("div",{className:"text-xl font-bold text-blue-900 dark:text-blue-300",children:r(12*(t.monthlyRevenue||0))}),a.jsx("div",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Basado en ingresos actuales"})]})]}),"projects"===l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[a.jsx("div",{className:"font-semibold text-purple-800 dark:text-purple-400",children:"Tasa de Finalización"}),a.jsx("div",{className:"text-2xl font-bold text-purple-900 dark:text-purple-300",children:t.completedProjects>0?(t.completedProjects/(t.completedProjects+t.activeProjects)*100).toFixed(1)+"%":"0%"}),a.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-400",children:"Proyectos completados vs total"})]}),a.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[a.jsx("div",{className:"font-semibold text-orange-800 dark:text-orange-400",children:"En Pipeline"}),a.jsx("div",{className:"text-xl font-bold text-orange-900 dark:text-orange-300",children:(t.activeProjects||0)+(t.pendingQuotes||0)}),a.jsx("div",{className:"text-sm text-orange-700 dark:text-orange-400",children:"Proyectos activos + cotizaciones"})]})]}),"clients"===l&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 bg-cyan-50 dark:bg-cyan-900/20 rounded-lg border border-cyan-200 dark:border-cyan-800",children:[a.jsx("div",{className:"font-semibold text-cyan-800 dark:text-cyan-400",children:"Crecimiento de Clientes"}),a.jsxs("div",{className:"text-2xl font-bold text-cyan-900 dark:text-cyan-300",children:["+",t.newClientsThisMonth||0]}),a.jsx("div",{className:"text-sm text-cyan-700 dark:text-cyan-400",children:"Nuevos este mes"})]}),a.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800",children:[a.jsx("div",{className:"font-semibold text-indigo-800 dark:text-indigo-400",children:"Total Acumulado"}),a.jsx("div",{className:"text-xl font-bold text-indigo-900 dark:text-indigo-300",children:t.totalClients||0}),a.jsx("div",{className:"text-sm text-indigo-700 dark:text-indigo-400",children:"Clientes registrados"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[a.jsx(T,{className:"w-4 h-4 mr-2"}),"Actividad Reciente"]}),(null==s?void 0:s.slice(0,3).map((e,t)=>a.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:["• ",e.message]},t)))||a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-500",children:"No hay actividad reciente"})]})]})]})]})]})},Ka=({type:e,data:t,width:s,height:r})=>{if(!t||0===t.length)return a.jsx("div",{children:"No hay datos disponibles"});const l=Math.max(...t.map(e=>e.revenue||e.clients||0));if(0===l||!isFinite(l))return a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No hay datos para mostrar"})});const i=r-60,d=s-60;return a.jsxs("svg",{width:s,height:r,className:"overflow-visible",children:[a.jsx("line",{x1:40,y1:20,x2:40,y2:i+20,stroke:"currentColor",strokeOpacity:.3}),a.jsx("line",{x1:40,y1:i+20,x2:d+40,y2:i+20,stroke:"currentColor",strokeOpacity:.3}),"line"===e?a.jsxs(a.Fragment,{children:[a.jsx("polyline",{fill:"none",stroke:"#3B82F6",strokeWidth:"3",points:t.map((e,a)=>`${t.length>1?40+a*(d/(t.length-1)):40+d/2},${20+i-(e.revenue||0)/l*i}`).join(" ")}),t.map((e,s)=>{const r=t.length>1?40+s*(d/(t.length-1)):40+d/2,n=20+i-(e.revenue||0)/l*i;return a.jsx("circle",{cx:r,cy:n,r:"4",fill:"#3B82F6"},s)})]}):t.map((e,s)=>{const r=d/t.length-20,n=(e.revenue||0)/l*i;return a.jsx("rect",{x:40+s*(d/t.length)+10,y:20+i-n,width:r,height:n,fill:"#3B82F6",opacity:.8},s)}),t.map((e,s)=>{const l=t.length>1?40+s*(d/(t.length-1)):40+d/2;return a.jsx("text",{x:l,y:r-10,textAnchor:"middle",fontSize:"12",fill:"currentColor",opacity:.7,children:e.month},s)})]})};Ka.propTypes={type:ze.string.isRequired,data:ze.array.isRequired,width:ze.number.isRequired,height:ze.number.isRequired};const Qa=({data:e,width:t,height:s})=>{if(!e||0===e.length)return a.jsx("div",{children:"No hay datos disponibles"});const r=e.reduce((e,a)=>e+a.value,0);if(0===r)return a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No hay datos para mostrar"})});const l=t/2,i=s/2,d=Math.min(t,s)/2-20;let n=0;return a.jsx("svg",{width:t,height:s,children:e.map((e,t)=>{const s=e.value/r*2*Math.PI,o=n,c=n+s,x=l+d*Math.cos(o),m=i+d*Math.sin(o),g=l+d*Math.cos(c),u=i+d*Math.sin(c),h=s>Math.PI?1:0,p=`M ${l} ${i} L ${x} ${m} A ${d} ${d} 0 ${h} 1 ${g} ${u} Z`;return n=c,a.jsx("path",{d:p,fill:e.color,opacity:.8,stroke:"white",strokeWidth:"2"},t)})})};Qa.propTypes={data:ze.array.isRequired,width:ze.number.isRequired,height:ze.number.isRequired},Ya.propTypes={stats:ze.object.isRequired,recentActivity:ze.array,formatCurrency:ze.func.isRequired};const Ja=({recentActivity:e,formatDate:t,getActivityIcon:s,getActivityColor:r})=>a.jsxs(Ma,{variant:"gradient",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-ghost-800 dark:text-ghost-100",children:"Actividad Reciente"}),a.jsx(Pa,{variant:"ghost",size:"sm",children:"Ver todo"})]}),a.jsx("div",{className:"space-y-4",children:Array.isArray(e)&&e.length>0?e.map(e=>a.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-lg border-l-4 ${r(e.priority)}`,children:[a.jsx("div",{className:"text-2xl flex-shrink-0",children:s(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-ghost-800 dark:text-ghost-200 leading-relaxed",children:e.message}),a.jsx("p",{className:"text-sm text-ghost-500 dark:text-ghost-400 mt-1",children:t(e.time)})]})]},e.id)):a.jsxs("div",{className:"text-center py-8 text-ghost-500 dark:text-ghost-400",children:[a.jsx("div",{className:"text-4xl mb-4",children:"📭"}),a.jsx("p",{children:"No hay actividad reciente"})]})})]});Ja.propTypes={recentActivity:ze.array.isRequired,formatDate:ze.func.isRequired,getActivityIcon:ze.func.isRequired,getActivityColor:ze.func.isRequired};const Za=({topClients:e,formatCurrency:t})=>a.jsxs(Ma,{variant:"gradient",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-ghost-800 dark:text-ghost-100",children:"Mejores Clientes"}),a.jsx(Pa,{variant:"ghost",size:"sm",children:"Ver más"})]}),a.jsx("div",{className:"space-y-4",children:Array.isArray(e)&&e.length>0?e.map((e,s)=>a.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-ghost-50 dark:bg-ghost-700/30",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold",children:s+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-ghost-800 dark:text-ghost-200 truncate",children:e.name}),a.jsx("p",{className:"text-sm text-ghost-500 dark:text-ghost-400 truncate",children:e.email}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsx("span",{className:"text-sm font-medium text-green-600",children:t(e.totalSpent)}),a.jsxs("span",{className:"text-xs text-ghost-500 dark:text-ghost-400",children:[e.projectsCount," proyectos"]})]})]})]},e.id)):a.jsxs("div",{className:"text-center py-8 text-ghost-500 dark:text-ghost-400",children:[a.jsx("div",{className:"text-4xl mb-4",children:"👥"}),a.jsx("p",{children:"No hay clientes registrados"})]})})]});Za.propTypes={topClients:ze.array.isRequired,formatCurrency:ze.func.isRequired};const et=({onActionClick:e})=>a.jsx("div",{className:"mt-8",children:a.jsxs(Ma,{variant:"gradient",children:[a.jsx("h2",{className:"text-xl font-semibold text-ghost-800 dark:text-ghost-100 mb-6",children:"Acciones Rápidas"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[{id:"new_quote",icon:"📋",label:"Nueva Cotización",variant:"primary"},{id:"add_client",icon:"👤",label:"Agregar Cliente",variant:"secondary"},{id:"register_payment",icon:"💰",label:"Registrar Pago",variant:"accent"},{id:"view_reports",icon:"📊",label:"Ver Reportes",variant:"ghost"}].map(t=>a.jsxs(Pa,{variant:t.variant,className:"h-20 flex flex-col items-center justify-center gap-2",onClick:()=>e&&e(t.id),children:[a.jsx("span",{className:"text-2xl",children:t.icon}),a.jsx("span",{children:t.label})]},t.id))})]})});et.propTypes={onActionClick:ze.func};const at=({stats:e,formatCurrency:t,onViewPayments:s})=>!e.pendingPayments||e.pendingPayments<=0?null:a.jsx("div",{className:"mt-8",children:a.jsx(Ma,{variant:"accent",className:"border-l-4 border-l-yellow-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"text-3xl",children:"⚠️"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-ghost-800 dark:text-ghost-100",children:"Pagos Pendientes"}),a.jsxs("p",{className:"text-ghost-600 dark:text-ghost-300",children:["Tienes ",t(e.pendingPayments)," en pagos pendientes"]})]})]}),a.jsx(Pa,{variant:"primary",onClick:s,children:"Revisar Pagos"})]})})});at.propTypes={stats:ze.object.isRequired,formatCurrency:ze.func.isRequired,onViewPayments:ze.func};const tt=({isOpen:t,onClose:s,onSave:r,user:l})=>{const[i,d]=e.useState({}),[n,o]=e.useState(null);if(e.useEffect(()=>{d(l?{nombre:l.nombre||"",email:l.email||"",telefono:l.telefono||"",direccion:l.direccion||"",empresa:l.empresa||"",rfc:l.rfc||"",rol:l.rol||"cliente",estado:l.estado||"activo"}:{nombre:"",email:"",password:"",telefono:"",direccion:"",empresa:"",rfc:"",rol:"cliente",estado:"activo"})},[l]),!t)return null;const x=e=>{const{name:a,value:t}=e.target;d(e=>({...e,[a]:t}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md m-4",children:a.jsxs("form",{onSubmit:async e=>{var a,t;e.preventDefault(),o(null);try{await r(i),s()}catch(l){o((null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.message)||"Ocurrió un error al guardar.")}},children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:l?"Editar Usuario":"Crear Nuevo Usuario"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[n&&a.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:[a.jsx("p",{className:"font-bold",children:"Error"}),a.jsx("p",{children:n})]}),a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"nombre",value:i.nombre,onChange:x,placeholder:"Nombre Completo",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(j,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"email",name:"email",value:i.email,onChange:x,placeholder:"Correo Electrónico",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),!l&&a.jsxs("div",{className:"relative",children:[a.jsx(U,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"password",name:"password",value:i.password,onChange:x,placeholder:"Contraseña",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(f,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"tel",name:"telefono",value:i.telefono,onChange:x,placeholder:"Teléfono",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("textarea",{name:"direccion",value:i.direccion,onChange:x,placeholder:"Dirección completa",rows:"2",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white resize-none"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(G,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"empresa",value:i.empresa,onChange:x,placeholder:"Empresa",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(G,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"rfc",value:i.rfc,onChange:x,placeholder:"RFC",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(G,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"rol",value:i.rol,onChange:x,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"admin",children:"Administrador"}),a.jsx("option",{value:"cliente",children:"Cliente"}),a.jsx("option",{value:"empleado",children:"Empleado"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(W,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"estado",value:i.estado,onChange:x,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"activo",children:"Activo"}),a.jsx("option",{value:"inactivo",children:"Inactivo"}),a.jsx("option",{value:"bloqueado",children:"Bloqueado"})]})]})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900/50 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-slate-600 dark:text-gray-200 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",children:"Guardar Cambios"})]})]})})})};tt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSave:ze.func.isRequired,user:ze.object};const st=({isOpen:t,onClose:s,onSave:r,order:l,clients:i})=>{const[d,n]=e.useState({}),[o,x]=e.useState(null);if(e.useEffect(()=>{n(l?{cliente_id:l.cliente_id||"",descripcion:l.descripcion||"",total:l.total||"",subtotal:l.subtotal||"",descuento:l.descuento||0,iva:l.iva||"",anticipo:l.anticipo||0,prioridad:l.prioridad||"normal",estado:l.estado||"nuevo",fecha_entrega_estimada:l.fecha_entrega_estimada?new Date(l.fecha_entrega_estimada).toISOString().split("T")[0]:"",notas_internas:l.notas_internas||""}:{cliente_id:"",descripcion:"",total:"",subtotal:"",descuento:0,iva:"",anticipo:0,prioridad:"normal",estado:"nuevo",fecha_entrega_estimada:"",notas_internas:""})},[l]),!t)return null;const m=e=>{const{name:a,value:t}=e.target;n(e=>({...e,[a]:t}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md m-4",children:a.jsxs("form",{onSubmit:async e=>{var a,t;e.preventDefault(),x(null);try{await r(d),s()}catch(l){x((null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.message)||"Ocurrió un error al guardar el pedido.")}},children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:l?"Editar Pedido":"Crear Nuevo Pedido"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[o&&a.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:[a.jsx("p",{className:"font-bold",children:"Error"}),a.jsx("p",{children:o})]}),a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"cliente_id",value:d.cliente_id,onChange:m,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"",children:"Seleccionar Cliente"}),i.map(e=>a.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"descripcion",value:d.descripcion,onChange:m,placeholder:"Descripción del Pedido",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",name:"subtotal",value:d.subtotal,onChange:m,placeholder:"Subtotal",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",name:"descuento",value:d.descuento,onChange:m,placeholder:"Descuento",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",name:"iva",value:d.iva,onChange:m,placeholder:"IVA",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",name:"anticipo",value:d.anticipo,onChange:m,placeholder:"Anticipo",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",name:"total",value:d.total,onChange:m,placeholder:"Total",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(H,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"prioridad",value:d.prioridad,onChange:m,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"baja",children:"Baja"}),a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"alta",children:"Alta"}),a.jsx("option",{value:"urgente",children:"Urgente"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(W,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"estado",value:d.estado,onChange:m,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"nuevo",children:"Nuevo"}),a.jsx("option",{value:"confirmado",children:"Confirmado"}),a.jsx("option",{value:"en_proceso",children:"En Proceso"}),a.jsx("option",{value:"completado",children:"Completado"}),a.jsx("option",{value:"cancelado",children:"Cancelado"}),a.jsx("option",{value:"en_pausa",children:"En Pausa"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(T,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"date",name:"fecha_entrega_estimada",value:d.fecha_entrega_estimada,onChange:m,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("textarea",{name:"notas_internas",value:d.notas_internas,onChange:m,placeholder:"Notas internas (opcional)",rows:"3",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white resize-none"})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900/50 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 dark:bg-slate-600 dark:text-gray-200 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",children:"Guardar Cambios"})]})]})})})};st.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSave:ze.func.isRequired,order:ze.object,clients:ze.array.isRequired};const rt=({isOpen:t,onClose:s,onSave:r,payment:l,clients:i,orders:d})=>{const[n,o]=e.useState({}),[x,m]=e.useState(null);if(e.useEffect(()=>{o(l?{cliente_id:l.cliente_id||"",tipo:l.tipo||"total",estado:l.estado||"pendiente",monto:l.monto||"",moneda:l.moneda||"MXN",tipo_cambio:l.tipo_cambio||1,metodo_pago:l.metodo_pago||"tarjeta",referencia:l.referencia||"",banco_origen:l.banco_origen||"",cuenta_destino:l.cuenta_destino||"",fecha_pago:l.fecha_pago?new Date(l.fecha_pago).toISOString().split("T")[0]:"",concepto:l.concepto||"",notas:l.notas||""}:{cliente_id:"",tipo:"total",estado:"pendiente",monto:"",moneda:"MXN",tipo_cambio:1,metodo_pago:"tarjeta",referencia:"",banco_origen:"",cuenta_destino:"",fecha_pago:"",concepto:"",notas:""})},[l]),!t)return null;const g=e=>{const{name:a,value:t}=e.target;o(e=>({...e,[a]:t}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md m-4",children:a.jsxs("form",{onSubmit:async e=>{var a,t;e.preventDefault(),m(null);try{await r(n),s()}catch(l){m((null==(t=null==(a=l.response)?void 0:a.data)?void 0:t.message)||"Ocurrió un error al guardar el pago.")}},children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:l?"Editar Pago":"Crear Nuevo Pago"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[x&&a.jsxs("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:[a.jsx("p",{className:"font-bold",children:"Error"}),a.jsx("p",{children:x})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"cliente_id",value:n.cliente_id,onChange:g,required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"",children:"Seleccionar Cliente"}),i.map(e=>a.jsx("option",{value:e.id,children:e.nombre},e.id))]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(W,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"tipo",value:n.tipo,onChange:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"anticipo",children:"Anticipo"}),a.jsx("option",{value:"parcial",children:"Parcial"}),a.jsx("option",{value:"total",children:"Total"}),a.jsx("option",{value:"devolucion",children:"Devolución"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"concepto",value:n.concepto,onChange:g,placeholder:"Concepto del Pago",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",step:"0.01",name:"monto",value:n.monto,onChange:g,placeholder:"Monto",required:!0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"moneda",value:n.moneda,onChange:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"MXN",children:"MXN"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EUR",children:"EUR"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(P,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"number",step:"0.0001",name:"tipo_cambio",value:n.tipo_cambio,onChange:g,placeholder:"Tipo de Cambio",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"metodo_pago",value:n.metodo_pago,onChange:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"efectivo",children:"Efectivo"}),a.jsx("option",{value:"transferencia",children:"Transferencia"}),a.jsx("option",{value:"tarjeta",children:"Tarjeta"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"paypal",children:"PayPal"}),a.jsx("option",{value:"otro",children:"Otro"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(W,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsxs("select",{name:"estado",value:n.estado,onChange:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg appearance-none focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"pendiente",children:"Pendiente"}),a.jsx("option",{value:"procesando",children:"Procesando"}),a.jsx("option",{value:"aplicado",children:"Aplicado"}),a.jsx("option",{value:"rechazado",children:"Rechazado"}),a.jsx("option",{value:"cancelado",children:"Cancelado"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(X,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"referencia",value:n.referencia,onChange:g,placeholder:"Referencia/No. Transacción",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"date",name:"fecha_pago",value:n.fecha_pago,onChange:g,className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"banco_origen",value:n.banco_origen,onChange:g,placeholder:"Banco Origen",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",name:"cuenta_destino",value:n.cuenta_destino,onChange:g,placeholder:"Cuenta Destino",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(S,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("textarea",{name:"notas",value:n.notas,onChange:g,placeholder:"Notas adicionales (opcional)",rows:"3",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white resize-none"})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900/50 border-t flex justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-violet-600 text-white rounded-lg",children:"Guardar Cambios"})]})]})})})};rt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSave:ze.func.isRequired,payment:ze.object,clients:ze.array.isRequired,orders:ze.array.isRequired};const lt=({isOpen:t,onClose:s})=>{const[r,l]=e.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[i,d]=e.useState(null),[n,o]=e.useState(null);if(!t)return null;const x=e=>{const{name:a,value:t}=e.target;l(e=>({...e,[a]:t}))};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md m-4",children:a.jsxs("form",{onSubmit:async e=>{var a,t,i;if(e.preventDefault(),d(null),o(null),r.newPassword===r.confirmPassword)try{const e=await(i={oldPassword:r.oldPassword,newPassword:r.newPassword},Ue.post("/api/auth/change-password",i));o(e.data.message),l({oldPassword:"",newPassword:"",confirmPassword:""}),setTimeout(s,2e3)}catch(n){d((null==(t=null==(a=n.response)?void 0:a.data)?void 0:t.message)||"Ocurrió un error al cambiar la contraseña.")}else d("Las contraseñas nuevas no coinciden.")},children:[a.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Cambiar Contraseña"}),a.jsx("button",{type:"button",onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"Cerrar modal",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[i&&a.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:a.jsx("p",{children:i})}),n&&a.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-md",children:a.jsx("p",{children:n})}),a.jsxs("div",{className:"relative",children:[a.jsx(U,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"password",name:"oldPassword",value:r.oldPassword,onChange:x,placeholder:"Contraseña Actual",required:!0,className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(U,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"password",name:"newPassword",value:r.newPassword,onChange:x,placeholder:"Nueva Contraseña",required:!0,className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(U,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"password",name:"confirmPassword",value:r.confirmPassword,onChange:x,placeholder:"Confirmar Nueva Contraseña",required:!0,className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-900/50 border-t flex justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg",children:"Cancelar"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-violet-600 text-white rounded-lg",children:"Cambiar Contraseña"})]})]})})})};lt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired};const it=({onImageUploaded:t,currentImage:s=null,placeholder:r="Seleccionar imagen",accept:l="image/*",maxSize:i=10485760,className:d=""})=>{const[n,o]=e.useState(!1),[x,m]=e.useState(s),[g,u]=e.useState(""),h=e.useRef(null),b=()=>{var e;null==(e=h.current)||e.click()};return a.jsxs("div",{className:`w-full ${d}`,children:[a.jsx("input",{ref:h,type:"file",accept:l,onChange:async e=>{var a,r;const l=e.target.files[0];if(l)if(l.size>i)u(`El archivo es demasiado grande. Máximo ${Math.round(i/1024/1024)}MB permitido.`);else if(l.type.startsWith("image/")){u(""),o(!0);try{const e=new FileReader;e.onload=e=>{m(e.target.result)},e.readAsDataURL(l);const a=new FormData;a.append("image",l);const s=await(e=>Ue.post("/api/projects/upload-image",e,{headers:{"Content-Type":"multipart/form-data"}}))(a);if(!s.data.success)throw new Error(s.data.message||"Error al subir imagen");{const e=s.data.data.url;m(e),null==t||t(e)}}catch(d){u((null==(r=null==(a=d.response)?void 0:a.data)?void 0:r.message)||"Error al subir la imagen"),m(s)}finally{o(!1)}}else u("Solo se permiten archivos de imagen.")},className:"hidden",disabled:n}),a.jsx("div",{className:"relative",children:x?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:x,alt:"Preview",className:"w-full h-48 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-600"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"button",onClick:b,disabled:n,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Y,{className:"w-4 h-4 inline mr-1"}),"Cambiar"]}),a.jsxs("button",{type:"button",onClick:()=>{m(null),u(""),null==t||t(null),h.current&&(h.current.value="")},disabled:n,className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:[a.jsx(c,{className:"w-4 h-4 inline mr-1"}),"Eliminar"]})]})}),n&&a.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 dark:bg-gray-800 dark:bg-opacity-75 rounded-lg flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"mt-2 text-sm text-gray-600 dark:text-gray-300",children:"Subiendo..."})]})})]}):a.jsx("button",{type:"button",onClick:b,disabled:n,className:"w-full h-48 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-400",children:n?a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"mt-2 text-sm",children:"Subiendo..."})]}):a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(K,{className:"w-12 h-12 mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:r}),a.jsxs("span",{className:"text-xs text-gray-400 mt-1",children:["PNG, JPG, GIF, WebP hasta ",(e=>{if(0===e)return"0 Bytes";const a=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,a)).toFixed(2))+" "+["Bytes","KB","MB","GB"][a]})(i)]})]})})}),g&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800 rounded-lg flex items-center text-red-700 dark:text-red-400 text-sm",children:[a.jsx(p,{className:"w-4 h-4 mr-2 flex-shrink-0"}),g]}),!x&&!g&&a.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center",children:"Haz clic para seleccionar una imagen o arrastra y suelta aquí"})]})};it.propTypes={onImageUploaded:ze.func,currentImage:ze.string,placeholder:ze.string,accept:ze.string,maxSize:ze.number,className:ze.string};const dt=({showNavigation:t=!0})=>{const[s,r]=e.useState([]),[l,i]=e.useState(!0),[d,n]=e.useState(!1),[o,x]=e.useState(""),[g,u]=e.useState(""),[p,y]=e.useState(""),[j,f]=e.useState("all"),[v,N]=e.useState("all"),[k,w]=e.useState(!1),[C,S]=e.useState(null),[P,T]=e.useState({nombre:"",descripcion:"",imagen:"",url:"",demo:"",tecnologias:[],categoria:"web",estado:"planificacion"}),[R,O]=e.useState(""),z=[{id:"all",label:"Todas las categorías",icon:J},{id:"web",label:"Desarrollo Web",icon:J},{id:"app",label:"Aplicaciones",icon:Z},{id:"system",label:"Sistemas",icon:ee},{id:"api",label:"APIs",icon:ae}],$=e.useCallback(async()=>{try{i(!0);const e=await Ue.get("/api/projects");e.data.success?r(e.data.data):M("Error al cargar los proyectos","error")}catch(e){M("Error al conectar con el servidor","error")}finally{i(!1)}},[]);e.useEffect(()=>{$()},[$]);const q=()=>{S(null),T({nombre:"",descripcion:"",imagen:"",url:"",demo:"",tecnologias:[],categoria:"web",estado:"planificacion"}),w(!0)},D=()=>{R.trim()&&!P.tecnologias.includes(R.trim())&&(T(e=>({...e,tecnologias:[...e.tecnologias,R.trim()]})),O(""))},M=(e,a)=>{x(e),u(a),setTimeout(()=>{x(""),u("")},3e3)},L=s.filter(e=>{const a=e.nombre.toLowerCase().includes(p.toLowerCase())||e.descripcion.toLowerCase().includes(p.toLowerCase()),t="all"===j||e.categoria===j,s="all"===v||e.estado===v;return a&&t&&s}),I=e=>{const t=z.find(a=>a.id===e),s=(null==t?void 0:t.icon)||J;return a.jsx(s,{className:"w-5 h-5"})},F=e=>{switch(e){case"planificacion":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-200";case"desarrollo":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-200";case"revision":return"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-200";case"completado":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-200";case"mantenimiento":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-200"}};return l?a.jsx("div",{className:t?"min-h-screen bg-gradient-to-br from-violet-50 via-white to-pink-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-6":"p-6",children:a.jsx("div",{className:t?"max-w-7xl mx-auto":"",children:a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-violet-600"})})})}):a.jsx("div",{className:t?"min-h-screen bg-gradient-to-br from-violet-50 via-white to-pink-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 p-6":"",children:a.jsxs("div",{className:t?"max-w-7xl mx-auto":"",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl lg:text-4xl font-heading font-bold text-gray-800 dark:text-gray-100 mb-4",children:"🎨 Gestión de Proyectos"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300 max-w-2xl",children:"Administra el portfolio de proyectos que se muestran en la página pública"})]}),a.jsxs(Pa,{variant:"primary",size:"sm",onClick:q,className:"flex items-center gap-2",children:[a.jsx(Q,{className:"w-4 h-4"}),"Nuevo Proyecto"]})]}),o&&a.jsxs("div",{className:"mt-4 p-4 rounded-lg flex items-center gap-2 "+("success"===g?"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200"),children:["success"===g?a.jsx(b,{className:"w-5 h-5"}):a.jsx(h,{className:"w-5 h-5"}),o]})]}),a.jsx(Ma,{variant:"gradient",className:"p-6 mb-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Buscar proyectos...",value:p,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("select",{value:j,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white appearance-none",children:z.map(e=>a.jsx("option",{value:e.id,children:e.label},e.id))})]}),a.jsx("select",{value:v,onChange:e=>N(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[{id:"all",label:"Todos los estados"},{id:"planificacion",label:"Planificación"},{id:"desarrollo",label:"Desarrollo"},{id:"revision",label:"Revisión"},{id:"completado",label:"Completado"},{id:"mantenimiento",label:"Mantenimiento"}].map(e=>a.jsx("option",{value:e.id,children:e.label},e.id))})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:L.map(e=>{var t,s;return a.jsxs(Ma,{variant:"gradient",className:"overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gray-200 dark:bg-gray-700",children:[e.imagen?a.jsx("img",{src:e.imagen,alt:e.nombre,className:"w-full h-full object-cover",onError:e=>{e.target.src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=400&q=80"}}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(te,{className:"w-12 h-12 text-gray-400"})}),a.jsx("div",{className:"absolute top-2 right-2",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${F(e.estado)}`,children:e.estado})})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[I(e.categoria),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 capitalize",children:e.categoria})]})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 line-clamp-1",children:e.nombre}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-4 line-clamp-2",children:e.descripcion}),a.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[null==(t=e.tecnologias)?void 0:t.slice(0,3).map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-violet-100 dark:bg-violet-900/20 text-violet-800 dark:text-violet-200 text-xs rounded-md",children:e},t)),(null==(s=e.tecnologias)?void 0:s.length)>3&&a.jsxs("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs rounded-md",children:["+",e.tecnologias.length-3]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex gap-2",children:[e.demo&&a.jsx("a",{href:e.demo,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-violet-600 transition-colors",title:"Ver Demo",children:a.jsx(A,{className:"w-4 h-4"})}),e.url&&a.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-500 hover:text-violet-600 transition-colors",title:"Ver Código",children:a.jsx(se,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>(e=>{S(e),T({nombre:e.nombre||"",descripcion:e.descripcion||"",imagen:e.imagen||"",url:e.url||"",demo:e.demo||"",tecnologias:e.tecnologias||[],categoria:e.categoria||"web",estado:e.estado||"planificacion"}),w(!0)})(e),className:"p-2 text-gray-500 hover:text-blue-600 transition-colors",title:"Editar",children:a.jsx(re,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este proyecto?"))try{n(!0),await Ue.delete(`/api/projects/${e}`),await $(),M("Proyecto eliminado exitosamente","success")}catch(a){M("Error al eliminar el proyecto","error")}finally{n(!1)}})(e.id),className:"p-2 text-gray-500 hover:text-red-600 transition-colors",title:"Eliminar",disabled:d,children:a.jsx(m,{className:"w-4 h-4"})})]})]})]})]},e.id)})}),0===L.length&&a.jsxs(Ma,{variant:"gradient",className:"p-12 text-center",children:[a.jsx(te,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"No se encontraron proyectos"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:p||"all"!==j||"all"!==v?"Intenta ajustar los filtros de búsqueda":"Comienza creando tu primer proyecto"}),!p&&"all"===j&&"all"===v&&a.jsxs(Pa,{variant:"primary",onClick:q,className:"flex items-center gap-2 mx-auto",children:[a.jsx(Q,{className:"w-4 h-4"}),"Crear Primer Proyecto"]})]}),k&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:C?"Editar Proyecto":"Nuevo Proyecto"}),a.jsx("button",{onClick:()=>w(!1),className:"p-2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre del Proyecto *"}),a.jsx("input",{type:"text",value:P.nombre,onChange:e=>T(a=>({...a,nombre:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Ej: Landing Page Corporativa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descripción *"}),a.jsx("textarea",{value:P.descripcion,onChange:e=>T(a=>({...a,descripcion:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Describe el proyecto y sus características principales..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Imagen del Proyecto"}),a.jsx(it,{currentImage:P.imagen,onImageUploaded:e=>T(a=>({...a,imagen:e})),placeholder:"Subir imagen del proyecto"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Demo"}),a.jsx("input",{type:"url",value:P.demo,onChange:e=>T(a=>({...a,demo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"https://demo.ejemplo.com"})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"URL del Repositorio"}),a.jsx("input",{type:"url",value:P.url,onChange:e=>T(a=>({...a,url:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"https://github.com/usuario/proyecto"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categoría"}),a.jsxs("select",{value:P.categoria,onChange:e=>T(a=>({...a,categoria:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"web",children:"Desarrollo Web"}),a.jsx("option",{value:"app",children:"Aplicaciones"}),a.jsx("option",{value:"system",children:"Sistemas"}),a.jsx("option",{value:"api",children:"APIs"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado"}),a.jsxs("select",{value:P.estado,onChange:e=>T(a=>({...a,estado:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",children:[a.jsx("option",{value:"planificacion",children:"Planificación"}),a.jsx("option",{value:"desarrollo",children:"Desarrollo"}),a.jsx("option",{value:"revision",children:"Revisión"}),a.jsx("option",{value:"completado",children:"Completado"}),a.jsx("option",{value:"mantenimiento",children:"Mantenimiento"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tecnologías"}),a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("input",{type:"text",value:R,onChange:e=>O(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),D()),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white",placeholder:"Ej: React, Node.js, MongoDB..."}),a.jsx(Pa,{type:"button",variant:"secondary",size:"sm",onClick:D,className:"px-4",children:a.jsx(Q,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:P.tecnologias.map((e,t)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-violet-100 dark:bg-violet-900/20 text-violet-800 dark:text-violet-200 text-sm rounded-full",children:[e,a.jsx("button",{type:"button",onClick:()=>(e=>{T(a=>({...a,tecnologias:a.tecnologias.filter(a=>a!==e)}))})(e),className:"ml-1 hover:text-violet-600",children:a.jsx(c,{className:"w-3 h-3"})})]},t))})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-8 pt-6 border-t border-gray-200 dark:border-gray-600",children:[a.jsx(Pa,{variant:"secondary",onClick:()=>w(!1),disabled:d,children:"Cancelar"}),a.jsxs(Pa,{variant:"primary",onClick:async()=>{if(P.nombre&&P.descripcion)try{n(!0),C?(await Ue.put(`/api/projects/${C.id}`,P),M("Proyecto actualizado exitosamente","success")):(await Ue.post("/api/projects",P),M("Proyecto creado exitosamente","success")),w(!1),await $()}catch(e){M("Error al guardar el proyecto","error")}finally{n(!1)}else M("Nombre y descripción son requeridos","error")},disabled:d,className:"flex items-center gap-2",children:[a.jsx(le,{className:"w-4 h-4"}),d?"Guardando...":C?"Actualizar":"Crear Proyecto"]})]})]})})})]})})};dt.propTypes={showNavigation:ze.bool};const nt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),ot=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,s]=e.useState({}),[r,l]=e.useState([]),[i,d]=e.useState([]),[n,o]=e.useState({}),[c,x]=e.useState({}),[u,h]=e.useState(!0),[y,v]=e.useState("month"),[k,w]=e.useState("dashboard"),[A,R]=e.useState(""),[z,$]=e.useState("todos"),[q,M]=e.useState(null),[L]=e.useState([]),[I]=e.useState([]),[B]=e.useState([]),[V,U]=e.useState(!1),[G,W]=e.useState(null),[H,X]=e.useState(!1),[Y,K]=e.useState(null),[J,Z]=e.useState(!1),[ee,ae]=e.useState(null),[te,se]=e.useState(!1),[re,le]=e.useState(""),[ne,oe]=e.useState(""),[ce,xe]=e.useState("");e.useEffect(()=>{(async()=>{h(!0);try{const[e,a,t,r,i]=await Promise.all([na(),Ue.get("/api/admin/recent-activity"),Ue.get("/api/admin/top-clients"),oa(y),Ue.get("/api/admin/financial-summary")]);e.data.success&&s(e.data.data),a.data.success&&l(a.data.data),t.data.success&&d(t.data.data),r.data.success&&o(r.data.data),i.data.success&&x(i.data.data)}catch(e){M("Error al cargar los datos del dashboard"),s({}),l([]),d([]),o({}),x({})}finally{h(!1)}})()},[y]);const me=async()=>{window.location.reload()},ge=e=>new Intl.NumberFormat("es-MX",{style:"currency",currency:"MXN"}).format(e),ue=e=>{const a=new Date(e),t=new Date,s=Math.abs(t-a),r=Math.ceil(s/36e5);return r<24?`Hace ${r}h`:`Hace ${Math.ceil(r/24)}d`},he=e=>{switch(e){case"new_payment":return"💰";case"new_quote":return"📋";case"project_completed":return"✅";case"overdue_payment":return"⚠️";case"new_client":return"👤";default:return"📢"}},pe=(e=null)=>{W(e),U(!0)},be=(e=null)=>{K(e),X(!0)},ye=(e=null)=>{ae(e),Z(!0)},ze=e=>{if("string"!=typeof e)return a.jsx(p,{className:"w-4 h-4 text-gray-500"});switch(e.toLowerCase()){case"completado":case"pagado":case"activo":return a.jsx(b,{className:"w-4 h-4 text-green-500"});case"en_proceso":return a.jsx(O,{className:"w-4 h-4 text-blue-500"});case"pendiente":case"nuevo":return a.jsx(p,{className:"w-4 h-4 text-yellow-500"});case"pendiente de verificación":return a.jsx(j,{className:"w-4 h-4 text-orange-500"});case"vencido":case"inactivo":return a.jsx(C,{className:"w-4 h-4 text-red-500"});default:return a.jsx(p,{className:"w-4 h-4 text-gray-500"})}},$e=e=>{if("string"!=typeof e)return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";switch(e.toLowerCase()){case"completado":case"pagado":case"activo":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"en_proceso":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"pendiente":case"nuevo":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"pendiente de verificación":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200";case"vencido":case"inactivo":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}},qe=e=>{if("string"!=typeof e)return"bg-gray-500";switch(e.toLowerCase()){case"alta":return"bg-red-500";case"normal":return"bg-yellow-500";case"baja":return"bg-green-500";default:return"bg-gray-500"}},De=(e,a)=>e.filter(e=>{if(!e)return!1;const t=a.some(a=>String(e[a]||"").toLowerCase().includes(A.toLowerCase())),s="todos"===z||e.estado&&e.estado===z;return t&&s}),Me=I.filter(e=>{var a;return"completado"===(null==(a=e.estado)?void 0:a.toLowerCase())}).length,Le=B.reduce((e,a)=>{var t;return"pagado"===(null==(t=a.estado)?void 0:t.toLowerCase())?e+parseFloat(a.monto||0):e},0),Ie=I.filter(e=>{var a;return"pendiente"===(null==(a=e.estado)?void 0:a.toLowerCase())}).length;return u?a.jsx(Ba,{children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(La,{height:"8",width:"1/3",className:"mb-4"}),a.jsx(La,{height:"4",width:"2/3"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[1,2,3,4].map(e=>a.jsxs("div",{className:"bg-white/10 border border-white/20 rounded-2xl p-6 animate-pulse",children:[a.jsx(La,{height:"8",width:"1/2",className:"mb-2"}),a.jsx(La,{height:"4",width:"3/4"})]},e))})]})}):q?a.jsx(Ba,{children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(p,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:"Error al cargar datos"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:q}),a.jsx(Pa,{onClick:()=>window.location.reload(),variant:"primary",children:"Reintentar"})]})})}):a.jsx(Ba,{onSidebarOptionSelect:e=>{["dashboard","overview","analytics","quick-stats"].includes(e)&&w(e),["cotizaciones","pedidos","historial"].includes(e)&&w(e),["ver-clientes","nuevo-cliente","estadisticas-clientes"].includes(e)&&w(e),["pagos-finanzas","reportes-finanzas","facturas-finanzas"].includes(e)&&w(e),["notificaciones-comm","mensajes-comm","emails-comm"].includes(e)&&w(e),["proyectos-admin"].includes(e)&&w(e),["configuracion-general","integraciones","seguridad"].includes(e)&&w(e)},children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl lg:text-4xl font-heading font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Panel de Administración"}),a.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"dashboard"===k?"Vista general de tu negocio y actividades recientes":`Gestiona ${k} desde un panel centralizado`})]}),"dashboard"===k&&a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Pa,{variant:"week"===y?"primary":"ghost",size:"sm",onClick:()=>v("week"),children:"Esta semana"}),a.jsx(Pa,{variant:"month"===y?"primary":"ghost",size:"sm",onClick:()=>v("month"),children:"Este mes"}),a.jsx(Pa,{variant:"year"===y?"primary":"ghost",size:"sm",onClick:()=>v("year"),children:"Este año"})]})]})}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-8 bg-white dark:bg-slate-800 rounded-lg p-2 shadow-lg",children:[{id:"dashboard",label:"Dashboard Principal",icon:F},{id:"clientes",label:"Clientes (CRUD)",icon:D},{id:"pagos",label:"Pagos",icon:N},{id:"configuracion",label:"Configuración (Legacy)",icon:g}].map(e=>a.jsxs("button",{onClick:()=>w(e.id),className:"flex items-center px-4 py-2 rounded-md font-medium transition-all "+(k===e.id?"bg-violet-600 text-white shadow-lg":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-slate-700"),children:[a.jsx(e.icon,{className:"w-4 h-4 mr-2"}),e.label]},e.id))}),"dashboard"!==k&&"configuracion"!==k&&a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(E,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Buscar...",value:A,onChange:e=>R(e.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_,{className:"w-5 h-5 text-gray-400"}),a.jsxs("select",{value:z,onChange:e=>$(e.target.value),className:"px-4 py-2 border rounded-lg dark:bg-slate-700 dark:border-slate-600 dark:text-white",children:[a.jsx("option",{value:"todos",children:"Todos"}),"clientes"===k&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"activo",children:"Activo"}),a.jsx("option",{value:"inactivo",children:"Inactivo"})]}),"pedidos"===k&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"pendiente",children:"Pendiente"}),a.jsx("option",{value:"en_proceso",children:"En Progreso"}),a.jsx("option",{value:"completado",children:"Completado"})]}),"pagos"===k&&a.jsxs(a.Fragment,{children:[a.jsx("option",{value:"pagado",children:"Pagado"}),a.jsx("option",{value:"pendiente de verificación",children:"Pendiente de Verificación"}),a.jsx("option",{value:"vencido",children:"Vencido"}),a.jsx("option",{value:"pendiente",children:"Pendiente"})]})]})]}),a.jsxs("button",{onClick:()=>{switch(k){case"clientes":pe();break;case"pedidos":be();break;case"pagos":ye()}},className:"flex items-center justify-center px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",children:[a.jsx(Q,{className:"w-4 h-4 mr-2"}),"Agregar ",k.slice(0,-1)]})]}),"dashboard"===k&&a.jsxs(a.Fragment,{children:[a.jsx(Ha,{stats:t,formatCurrency:ge}),a.jsx(Xa,{stats:t,financialSummary:c,formatCurrency:ge,className:"mb-8"}),a.jsx(Ya,{stats:t,chartsData:n,recentActivity:r,topClients:i,formatCurrency:ge,className:"mb-8"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Ja,{recentActivity:r,formatDate:ue,getActivityIcon:he,getActivityColor:e=>{switch(e){case"urgent":return"border-l-red-500 bg-red-50/50 dark:bg-red-900/10";case"high":return"border-l-yellow-500 bg-yellow-50/50 dark:bg-yellow-900/10";default:return"border-l-blue-500 bg-blue-50/50 dark:bg-blue-900/10"}}})}),a.jsx("div",{children:a.jsx(Za,{topClients:i,formatCurrency:ge})})]}),a.jsx(et,{onActionClick:e=>{switch(e){case"new_client":w("clientes"),pe();break;case"new_order":w("pedidos"),be();break;case"new_payment":w("pagos"),ye();break;case"view_reports":w("dashboard")}}}),a.jsx(at,{stats:t,formatCurrency:ge,onViewPayments:()=>{w("pagos"),$("pendiente")}})]}),"overview"===k&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-2xl p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 text-sm",children:"Clientes Totales"}),a.jsx("p",{className:"text-3xl font-bold",children:t.totalClients||0})]}),a.jsx(D,{className:"w-8 h-8 text-blue-200"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-green-100 text-sm",children:"Proyectos Activos"}),a.jsx("p",{className:"text-3xl font-bold",children:t.activeProjects||0})]}),a.jsx(S,{className:"w-8 h-8 text-green-200"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-2xl p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-purple-100 text-sm",children:"Ingresos del Mes"}),a.jsx("p",{className:"text-3xl font-bold",children:ge(t.monthlyRevenue||0)})]}),a.jsx(P,{className:"w-8 h-8 text-purple-200"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-2xl p-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-orange-100 text-sm",children:"Pagos Pendientes"}),a.jsx("p",{className:"text-3xl font-bold",children:t.pendingPayments||0})]}),a.jsx(p,{className:"w-8 h-8 text-orange-200"})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Actividad Reciente"}),a.jsx("div",{className:"space-y-3",children:r.slice(0,5).map((e,t)=>a.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-slate-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-2xl mr-3",children:he(e.type)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:e.message}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:ue(e.date)})]})]})},t))})]})]}),"analytics"===k&&a.jsxs("div",{className:"space-y-8",children:[a.jsx(Ya,{stats:t,chartsData:n,recentActivity:r,topClients:i,formatCurrency:ge,className:"mb-8"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Rendimiento por Período"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Esta Semana"}),a.jsx("span",{className:"font-semibold text-green-600",children:"+12%"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Este Mes"}),a.jsx("span",{className:"font-semibold text-blue-600",children:"+8%"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Este Año"}),a.jsx("span",{className:"font-semibold text-purple-600",children:"+25%"})]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Métricas de Conversión"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Cotizaciones a Pedidos"}),a.jsx("span",{className:"font-semibold text-green-600",children:"68%"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Retención de Clientes"}),a.jsx("span",{className:"font-semibold text-blue-600",children:"85%"})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Satisfacción"}),a.jsx("span",{className:"font-semibold text-purple-600",children:"94%"})]})]})]})]})]}),"quick-stats"===k&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:t.totalClients||0}),a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Clientes Registrados"}),a.jsxs("div",{className:"text-sm text-green-600 mt-1",children:["+",t.newClientsThisMonth||0," este mes"]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:t.completedProjects||0}),a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Proyectos Completados"}),a.jsxs("div",{className:"text-sm text-blue-600 mt-1",children:[t.activeProjects||0," activos"]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 text-center",children:[a.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:ge(t.averageProjectValue||0)}),a.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Valor Promedio"}),a.jsxs("div",{className:"text-sm text-orange-600 mt-1",children:[t.pendingQuotes||0," cotizaciones"]})]})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Resumen Ejecutivo"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Ingresos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Mensual:"}),a.jsx("span",{className:"font-semibold",children:ge(t.monthlyRevenue||0)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pendiente:"}),a.jsx("span",{className:"font-semibold text-orange-600",children:ge(1e3*(t.pendingPayments||0))})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Proyectos"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"En progreso:"}),a.jsx("span",{className:"font-semibold",children:t.activeProjects||0})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completados:"}),a.jsx("span",{className:"font-semibold text-green-600",children:t.completedProjects||0})]})]})]})]})]})]}),"dashboard_basico"===k&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-violet-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Clientes"}),a.jsx("p",{className:"text-2xl font-bold text-violet-600 dark:text-violet-400",children:L.length})]}),a.jsx(D,{className:"w-8 h-8 text-violet-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pedidos Completados"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:Me})]}),a.jsx(b,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ingresos Totales"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",Le.toLocaleString()]})]}),a.jsx(P,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg p-6 border-l-4 border-orange-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pedidos Pendientes"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:Ie})]}),a.jsx(p,{className:"w-8 h-8 text-orange-500"})]})})]}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg overflow-hidden",children:["clientes"===k&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contacto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Rol"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Registro"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:De(L,["nombre","email"]).map(e=>{var t;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-violet-400 to-purple-400 flex items-center justify-center text-white font-medium",children:null==(t=e.nombre)?void 0:t.charAt(0)}),a.jsxs("div",{className:"ml-3",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.nombre}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",e.id]})]})]})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[a.jsx(j,{className:"w-4 h-4 mr-2 text-gray-400"}),e.email]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 flex items-center",children:[a.jsx(f,{className:"w-4 h-4 mr-2 text-gray-400"}),e.telefono]})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[ze(e.estado),a.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${$e(e.estado)}`,children:e.estado})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.rol})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),new Date(e.fecha_registro).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>pe(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",children:a.jsx(ie,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{await Ye(e),await me()}catch(a){M("No se pudo eliminar el usuario.")}})(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(m,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),"pedidos"===k&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Descripción"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prioridad"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Valor"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:De(I,["cliente_nombre","descripcion"]).map(e=>{var t;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.cliente_nombre})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:e.descripcion})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[ze(e.estado),a.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${$e(e.estado)}`,children:e.estado})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-2 h-2 rounded-full mr-2 ${qe(e.prioridad)}`}),a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.prioridad})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:["$",null==(t=e.valor)?void 0:t.toLocaleString()]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),new Date(e.fecha_creacion).toLocaleDateString()]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>be(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",children:a.jsx(ie,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este pedido?"))try{await Je(e),await me()}catch(a){M("No se pudo eliminar el pedido.")}})(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(m,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),"pagos"===k&&a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Concepto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Método"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Referencia"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:De(B,["cliente_nombre","concepto"]).map(e=>{var t;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:e.cliente_nombre}),a.jsx("td",{className:"px-6 py-4",children:e.concepto}),a.jsxs("td",{className:"px-6 py-4",children:["$",null==(t=e.monto)?void 0:t.toLocaleString()]}),a.jsx("td",{className:"px-6 py-4",children:e.metodo}),a.jsx("td",{className:"px-6 py-4",children:e.referencia_transferencia}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[ze(e.estado),a.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${$e(e.estado)}`,children:e.estado})]})}),a.jsx("td",{className:"px-6 py-4",children:new Date(e.fecha_pago).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>ye(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",children:a.jsx(ie,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres eliminar este pago?"))try{await ta(e),await me()}catch(a){M("No se pudo eliminar el pago.")}})(e.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:a.jsx(m,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),"configuracion"===k&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"px-4 py-4 border-b border-gray-200 dark:border-gray-700 mb-6",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white flex items-center",children:[a.jsx(g,{className:"w-5 h-5 mr-2"}),"Configuración del Panel"]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Ajusta las preferencias y la seguridad de tu panel."})]}),a.jsxs("div",{className:"space-y-8 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4",children:[a.jsx(D,{className:"w-5 h-5 mr-2"}),"Perfil de Administrador"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),a.jsx("input",{type:"text",defaultValue:"Admin",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),a.jsx("input",{type:"email",defaultValue:"admin@example.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",children:"Guardar Cambios"})})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4",children:[a.jsx(de,{className:"w-5 h-5 mr-2"}),"Seguridad"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"Cambiar Contraseña"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Se recomienda cambiar la contraseña periódicamente."})]}),a.jsx("button",{onClick:()=>{se(!0)},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700",children:"Cambiar"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:"Autenticación de Dos Factores (2FA)"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Añade una capa extra de seguridad a tu cuenta."})]}),a.jsx("button",{className:"w-12 h-6 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center transition-colors p-1",children:a.jsx("span",{className:"w-4 h-4 rounded-full bg-white transform transition-transform"})})]})]})]}),a.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-slate-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center mb-4",children:[a.jsx(N,{className:"w-5 h-5 mr-2"}),"Pasarelas de Pago"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200",children:"Credenciales de PayPal"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 -mt-2",children:"Estas credenciales se usarán para procesar pagos reales. Trátelas con cuidado."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client ID"}),a.jsx("input",{type:"text",value:re,onChange:e=>le(e.target.value),placeholder:"Su Client ID de PayPal",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Secret Key"}),a.jsx("input",{type:"password",value:ne,onChange:e=>oe(e.target.value),placeholder:"Ingrese una nueva Secret Key para actualizar",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-violet-500 focus:border-transparent dark:bg-slate-700 dark:text-white"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"La clave secreta no se muestra por seguridad. Deje el campo en blanco para no cambiarla."})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end items-center gap-4",children:[ce&&a.jsx("p",{className:"text-sm text-green-600 dark:text-green-400",children:ce}),a.jsx("button",{onClick:async()=>{try{const a={PAYPAL_CLIENT_ID:re,PAYPAL_SECRET_KEY:ne};a.PAYPAL_SECRET_KEY||delete a.PAYPAL_SECRET_KEY,await(e=a,Ue.put("/api/config",e)),xe("¡Configuración de PayPal guardada con éxito!"),oe(""),setTimeout(()=>xe(""),3e3)}catch(a){xe("Error al guardar. Verifique la consola."),setTimeout(()=>xe(""),3e3)}var e},className:"px-4 py-2 bg-violet-600 text-white rounded-lg hover:bg-violet-700 transition-colors",children:"Guardar Configuración de PayPal"})]})]})]})]}),"cotizaciones"===k&&a.jsx("div",{children:a.jsx(je,{showNavigation:!1})}),"pedidos"===k&&a.jsx("div",{children:a.jsx(fe,{showNavigation:!1})}),"historial"===k&&a.jsx("div",{children:a.jsx(ve,{showNavigation:!1})}),"ver-clientes"===k&&a.jsx("div",{children:a.jsx(Ne,{showNavigation:!1})}),"nuevo-cliente"===k&&a.jsx("div",{children:a.jsx(ke,{showNavigation:!1})}),"estadisticas-clientes"===k&&a.jsx("div",{children:a.jsx(we,{showNavigation:!1})}),"pagos-finanzas"===k&&a.jsx("div",{children:a.jsx(Ce,{showNavigation:!1})}),"reportes-finanzas"===k&&a.jsx("div",{children:a.jsx(Se,{showNavigation:!1})}),"facturas-finanzas"===k&&a.jsx("div",{children:a.jsx(Pe,{showNavigation:!1})}),"notificaciones-comm"===k&&a.jsx("div",{children:a.jsx(Ee,{showNavigation:!1})}),"mensajes-comm"===k&&a.jsx("div",{children:a.jsx(_e,{showNavigation:!1})}),"emails-comm"===k&&a.jsx("div",{children:a.jsx(Te,{showNavigation:!1})}),"configuracion-general"===k&&a.jsx("div",{children:a.jsx(Ae,{showNavigation:!1})}),"integraciones"===k&&a.jsx("div",{children:a.jsx(Re,{showNavigation:!1})}),"seguridad"===k&&a.jsx("div",{children:a.jsx(Oe,{showNavigation:!1})}),"proyectos-admin"===k&&a.jsx("div",{children:a.jsx(dt,{showNavigation:!1})})]}),a.jsx(tt,{isOpen:V,onClose:()=>{W(null),U(!1)},onSave:async e=>{try{G?await Xe(G.id,e):await He(e),await me()}catch(a){throw a}},user:G}),a.jsx(st,{isOpen:H,onClose:()=>{K(null),X(!1)},onSave:async e=>{try{Y?await Qe(Y.id,e):await(e=>Ue.post("/api/orders",e))(e),await me()}catch(a){throw a}},order:Y,clients:L}),a.jsx(rt,{isOpen:J,onClose:()=>{ae(null),Z(!1)},onSave:async e=>{try{ee?await aa(ee.id,e):await(e=>Ue.post("/api/payments",e))(e),await me()}catch(a){throw a}},payment:ee,clients:L,orders:I}),a.jsx(lt,{isOpen:te,onClose:()=>{se(!1)}})]})})}},Symbol.toStringTag,{value:"Module"}));let ct=0;const xt=new Map,mt=e=>{if(xt.has(e))return;const a=setTimeout(()=>{xt.delete(e),pt({type:"REMOVE_TOAST",toastId:e})},1e6);xt.set(e,a)},gt=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?mt(t):e.toasts.forEach(e=>{mt(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===a.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},ut=[];let ht={toasts:[]};function pt(e){ht=gt(ht,e),ut.forEach(e=>{e(ht)})}function bt({...e}){const a=(ct=(ct+1)%Number.MAX_SAFE_INTEGER,ct.toString()),t=()=>pt({type:"DISMISS_TOAST",toastId:a});return pt({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>pt({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function yt(){const[a,t]=e.useState(ht);return e.useEffect(()=>(ut.push(t),()=>{const e=ut.indexOf(t);e>-1&&ut.splice(e,1)}),[a]),{...a,toast:bt,dismiss:e=>pt({type:"DISMISS_TOAST",toastId:e})}}const jt=e=>{const a={};var t,s;return(!e.nombre||e.nombre.trim().length<2)&&(a.nombre="El nombre debe tener al menos 2 caracteres"),e.nombre&&e.nombre.length>255&&(a.nombre="El nombre no puede exceder los 255 caracteres"),e.email&&(t=e.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))||(a.email="El email es requerido y debe tener un formato válido"),e.telefono&&(s=e.telefono,!/^[+]?[1-9][\d]{0,15}$/.test(s.replace(/\s/g,"")))&&(a.telefono="El formato del teléfono no es válido"),e.empresa&&e.empresa.length>255&&(a.empresa="El nombre de la empresa no puede exceder los 255 caracteres"),e.direccion&&e.direccion.length>500&&(a.direccion="La dirección no puede exceder los 500 caracteres"),e.rfc&&(e.rfc.length<10||e.rfc.length>13)&&(a.rfc="El RFC debe tener entre 10 y 13 caracteres"),e.estado&&!["activo","inactivo","pendiente"].includes(e.estado)&&(a.estado="El estado debe ser: activo, inactivo o pendiente"),{isValid:0===Object.keys(a).length,errors:a}},ft=(a={},t={},s={})=>{const{validateOnChange:r=!0,validateOnBlur:l=!0,debounceTime:i=300,enableReinitialize:d=!1}=s,[n,o]=e.useState(a),[c,x]=e.useState({}),[m,g]=e.useState({}),[u,h]=e.useState(!1),[p,b]=e.useState(!1);e.useEffect(()=>{d&&(o(a),x({}),g({}))},[a,d]);const y=e.useCallback(async(e,a,s=n)=>{if(!t[e])return null;const r=t[e];for(const t of r)try{const e=await t(a,s);if(!0!==e)return e}catch(l){return l.message||"Error de validación"}return null},[t,n]),j=e.useCallback(async(e=n)=>{h(!0);const a={};for(const[s,r]of Object.entries(t))if(r&&r.length>0){const t=await y(s,e[s],e);t&&(a[s]=t)}return h(!1),x(a),0===Object.keys(a).length},[t,n,y]),f=e.useCallback(((e,a)=>{let t;return function(...e){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),(async(e,a,t)=>{const s=await y(e,a,t);x(a=>({...a,[e]:s}))})(...e)},a)}})(0,i),[y,i]),v=e.useCallback(e=>{const{name:a,value:s,type:l,checked:i}=e.target,d="checkbox"===l?i:s;o(e=>{const s={...e,[a]:d};return c[a]&&x(e=>({...e,[a]:null})),r&&t[a]&&f(a,d,s),s})},[c,r,t,f]),N=e.useCallback(async e=>{const{name:a}=e.target;if(g(e=>({...e,[a]:!0})),l&&t[a]){const e=await y(a,n[a],n);x(t=>({...t,[a]:e}))}},[l,t,y,n]),k=e.useCallback(async e=>async a=>{a&&a.preventDefault();const s=Object.keys(t);if(g(s.reduce((e,a)=>({...e,[a]:!0}),{})),await j(n)){b(!0);try{await e(n,{setFieldError:w})}catch(r){}finally{b(!1)}}},[t,j,n]),w=e.useCallback((e,a)=>{x(t=>({...t,[e]:a}))},[]),C=e.useCallback((e,a)=>{o(t=>({...t,[e]:a})),c[e]&&x(a=>({...a,[e]:null}))},[c]),S=e.useCallback((e=a)=>{o(e),x({}),g({}),b(!1)},[a]),P=e.useCallback(e=>({name:e,value:n[e]||"",onChange:v,onBlur:N,error:m[e]?c[e]:null,hasError:m[e]&&!!c[e]}),[n,v,N,m,c]),E=Object.keys(c).every(e=>!c[e]),_=Object.keys(c).some(e=>c[e]);return{values:n,errors:c,touched:m,isValidating:u,isSubmitting:p,isValid:E,hasErrors:_,handleChange:v,handleBlur:N,handleSubmit:k,validateForm:j,validateField:y,setFieldError:w,setFieldValue:C,resetForm:S,getFieldProps:P}},vt=({isOpen:t,onClose:s,onSuccess:r})=>{const[l,i]=e.useState(!1),{addToast:d}=yt(),n={nombre:[e=>(null==e?void 0:e.trim().length)>=2||"El nombre debe tener al menos 2 caracteres"],email:[e=>jt({email:e}).isValid||"Email requerido con formato válido"],telefono:[e=>!e||e.length>=10||"Teléfono debe tener al menos 10 caracteres"],empresa:[e=>!e||e.length<=255||"Empresa no puede exceder 255 caracteres"],direccion:[e=>!e||e.length<=500||"Dirección no puede exceder 500 caracteres"],rfc:[e=>!e||e.length>=10&&e.length<=13||"RFC debe tener entre 10 y 13 caracteres"]},{errors:o,handleSubmit:x,resetForm:m,getFieldProps:g}=ft({nombre:"",email:"",telefono:"",direccion:"",empresa:"",rfc:""},n);return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),a.jsxs("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-slate-800 shadow-xl rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Crear Nuevo Cliente"}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:x(async e=>{var a,t,l;i(!0);try{(await(l=e,Ue.post("/api/clients",l))).data.success&&(d("Cliente creado exitosamente","success"),m(),r(),s())}catch(n){const e=(null==(t=null==(a=n.response)?void 0:a.data)?void 0:t.message)||"Error al crear cliente";d(e,"error")}finally{i(!1)}}),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Completo *"}),a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...g("nombre"),type:"text",placeholder:"Ej: Juan Pérez González",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(o.nombre?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.nombre&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.nombre})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),a.jsxs("div",{className:"relative",children:[a.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...g("email"),type:"email",placeholder:"cliente@empresa.com",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(o.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Teléfono"}),a.jsxs("div",{className:"relative",children:[a.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...g("telefono"),type:"tel",placeholder:"+52 55 1234 5678",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(o.telefono?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.telefono&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.telefono})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Empresa"}),a.jsxs("div",{className:"relative",children:[a.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...g("empresa"),type:"text",placeholder:"Nombre de la empresa",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(o.empresa?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.empresa&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.empresa})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"RFC"}),a.jsxs("div",{className:"relative",children:[a.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...g("rfc"),type:"text",placeholder:"PEGJ850123ABC",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(o.rfc?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.rfc&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.rfc})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dirección"}),a.jsxs("div",{className:"relative",children:[a.jsx(v,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),a.jsx("textarea",{...g("direccion"),rows:3,placeholder:"Dirección completa del cliente",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white resize-none "+(o.direccion?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),o.direccion&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:o.direccion})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-400 mb-2",children:"Información importante"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[a.jsxs("li",{children:["• Se creará una cuenta automáticamente con contraseña temporal: ",a.jsx("code",{children:"cliente123"})]}),a.jsx("li",{children:"• El cliente recibirá una notificación de bienvenida"}),a.jsx("li",{children:'• El estado inicial será "activo"'})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-slate-700 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Creando...":"Crear Cliente"})]})]})]})]})}):null};vt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSuccess:ze.func.isRequired};const Nt=({isOpen:t,onClose:s,onSuccess:r,client:l})=>{const[i,d]=e.useState(!1),{addToast:n}=yt(),o={nombre:(null==l?void 0:l.nombre)||"",email:(null==l?void 0:l.email)||"",telefono:(null==l?void 0:l.telefono)||"",direccion:(null==l?void 0:l.direccion)||"",empresa:(null==l?void 0:l.empresa)||"",rfc:(null==l?void 0:l.rfc)||"",estado:(null==l?void 0:l.estado)||"activo"},x={nombre:[e=>(null==e?void 0:e.trim().length)>=2||"El nombre debe tener al menos 2 caracteres"],email:[e=>jt({email:e}).isValid||"Email requerido con formato válido"],telefono:[e=>!e||e.length>=10||"Teléfono debe tener al menos 10 caracteres"],empresa:[e=>!e||e.length<=255||"Empresa no puede exceder 255 caracteres"],direccion:[e=>!e||e.length<=500||"Dirección no puede exceder 500 caracteres"],rfc:[e=>!e||e.length>=10&&e.length<=13||"RFC debe tener entre 10 y 13 caracteres"],estado:[e=>["activo","inactivo","pendiente"].includes(e)||"Estado inválido"]},{errors:m,handleSubmit:g,getFieldProps:u,setFieldValue:h}=ft(o,x,{enableReinitialize:!0});return e.useEffect(()=>{l&&(h("nombre",l.nombre||""),h("email",l.email||""),h("telefono",l.telefono||""),h("direccion",l.direccion||""),h("empresa",l.empresa||""),h("rfc",l.rfc||""),h("estado",l.estado||"activo"))},[l,h]),t&&l?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),a.jsxs("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-slate-800 shadow-xl rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Editar Cliente: ",l.nombre]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:g(async e=>{var a,t,i,o;d(!0);try{(await(i=l.id,o=e,Ue.put(`/api/clients/${i}`,o))).data.success&&(n("Cliente actualizado exitosamente","success"),r(),s())}catch(c){const e=(null==(t=null==(a=c.response)?void 0:a.data)?void 0:t.message)||"Error al actualizar cliente";n(e,"error")}finally{d(!1)}}),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nombre Completo *"}),a.jsxs("div",{className:"relative",children:[a.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...u("nombre"),type:"text",placeholder:"Ej: Juan Pérez González",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.nombre?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.nombre&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.nombre})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),a.jsxs("div",{className:"relative",children:[a.jsx(j,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...u("email"),type:"email",placeholder:"cliente@empresa.com",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.email?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Teléfono"}),a.jsxs("div",{className:"relative",children:[a.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...u("telefono"),type:"tel",placeholder:"+52 55 1234 5678",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.telefono?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.telefono&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.telefono})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Estado *"}),a.jsxs("div",{className:"relative",children:[a.jsx(de,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsxs("select",{...u("estado"),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.estado?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600"),children:[a.jsx("option",{value:"activo",children:"Activo"}),a.jsx("option",{value:"inactivo",children:"Inactivo"}),a.jsx("option",{value:"pendiente",children:"Pendiente"})]})]}),m.estado&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.estado})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Empresa"}),a.jsxs("div",{className:"relative",children:[a.jsx(ne,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...u("empresa"),type:"text",placeholder:"Nombre de la empresa",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.empresa?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.empresa&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.empresa})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"RFC"}),a.jsxs("div",{className:"relative",children:[a.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{...u("rfc"),type:"text",placeholder:"PEGJ850123ABC",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.rfc?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.rfc&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.rfc})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dirección"}),a.jsxs("div",{className:"relative",children:[a.jsx(v,{className:"absolute left-3 top-3 text-gray-400 w-4 h-4"}),a.jsx("textarea",{...u("direccion"),rows:3,placeholder:"Dirección completa del cliente",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white resize-none "+(m.direccion?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.direccion&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.direccion})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Información del cliente"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"ID:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:l.id})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Registro:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:new Date(l.created_at).toLocaleDateString("es-ES")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Proyectos:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:l.total_proyectos||0})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Completados:"}),a.jsx("span",{className:"ml-2 font-medium text-gray-900 dark:text-white",children:l.proyectos_completados||0})]})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-slate-700 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Actualizando...":"Actualizar Cliente"})]})]})]})]})}):null};Nt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSuccess:ze.func.isRequired,client:ze.shape({id:ze.oneOfType([ze.string,ze.number]),nombre:ze.string,email:ze.string,telefono:ze.string,direccion:ze.string,empresa:ze.string,rfc:ze.string,estado:ze.string,created_at:ze.string,total_proyectos:ze.number,proyectos_completados:ze.number})};const kt=({isOpen:t,onClose:s,onSend:r,client:l})=>{var i;const[d,n]=e.useState(!1),{addToast:o}=yt(),{values:x,errors:m,handleSubmit:g,resetForm:y,getFieldProps:j}=ft({tipo:"info",titulo:"",mensaje:"",prioridad:"normal"},{tipo:[e=>e&&e.length>0||"El tipo de mensaje es requerido"],titulo:[e=>(null==e?void 0:e.trim().length)>=3||"El título debe tener al menos 3 caracteres"],mensaje:[e=>(null==e?void 0:e.trim().length)>=10||"El mensaje debe tener al menos 10 caracteres"],prioridad:[e=>["baja","normal","alta","critica"].includes(e)||"Prioridad inválida"]}),f=[{value:"info",label:"Información",icon:u,color:"blue"},{value:"aviso",label:"Aviso",icon:h,color:"yellow"},{value:"confirmacion",label:"Confirmación",icon:b,color:"green"},{value:"urgente",label:"Urgente",icon:p,color:"red"},{value:"actualizacion",label:"Actualización",icon:u,color:"purple"}],v=[{value:"baja",label:"Baja",color:"gray"},{value:"normal",label:"Normal",color:"blue"},{value:"alta",label:"Alta",color:"orange"},{value:"critica",label:"Crítica",color:"red"}];if(!t||!l)return null;const N=(e=>{const a=f.find(a=>a.value===e);return a?a.icon:u})(x.tipo),k=(e=>{const a=f.find(a=>a.value===e);return(null==a?void 0:a.color)||"blue"})(x.tipo),w=(e=>{const a=v.find(a=>a.value===e);return(null==a?void 0:a.color)||"blue"})(x.prioridad);return a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),a.jsxs("div",{className:"inline-block w-full max-w-2xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-slate-800 shadow-xl rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(oe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Enviar Mensaje"}),a.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Para: ",l.nombre," (",l.email,")"]})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:g(async e=>{n(!0);try{await r(e),y()}catch(a){o("Error al enviar mensaje","error")}finally{n(!1)}}),className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tipo de Mensaje *"}),a.jsx("select",{...j("tipo"),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.tipo?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600"),children:f.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),m.tipo&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.tipo})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prioridad *"}),a.jsx("select",{...j("prioridad"),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.prioridad?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600"),children:v.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))}),m.prioridad&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.prioridad})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Título del Mensaje *"}),a.jsxs("div",{className:"relative",children:[a.jsx(N,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 text-${k}-400 w-4 h-4`}),a.jsx("input",{...j("titulo"),type:"text",placeholder:"Ej: Actualización importante de tu proyecto",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white "+(m.titulo?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")})]}),m.titulo&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.titulo})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mensaje *"}),a.jsx("textarea",{...j("mensaje"),rows:6,placeholder:"Escribe aquí el contenido del mensaje para el cliente...",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white resize-none "+(m.mensaje?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-slate-600")}),m.mensaje&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m.mensaje}),a.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[x.mensaje.length,"/1000 caracteres"]})]}),x.titulo&&x.mensaje&&a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:"Vista previa del mensaje"}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg border border-gray-200 dark:border-slate-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(N,{className:`w-5 h-5 text-${k}-500 mr-2`}),a.jsx("h5",{className:"font-medium text-gray-900 dark:text-white",children:x.titulo})]}),a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full bg-${w}-100 text-${w}-800 dark:bg-${w}-900/30 dark:text-${w}-400`,children:null==(i=v.find(e=>e.value===x.prioridad))?void 0:i.label})]}),a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:x.mensaje})]})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-400 mb-2",children:"Información importante"}),a.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[a.jsx("li",{children:"• El cliente recibirá una notificación inmediatamente"}),a.jsx("li",{children:"• El mensaje se guardará en el historial de comunicación"}),a.jsx("li",{children:"• Los mensajes urgentes aparecerán destacados para el cliente"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-slate-700 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?"Enviando...":"Enviar Mensaje"})]})]})]})]})})};kt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,onSend:ze.func.isRequired,client:ze.shape({nombre:ze.string,email:ze.string})};const wt=({isOpen:t,onClose:s,clientId:r})=>{const[l,i]=e.useState(null),[d,n]=e.useState(!1),[o,x]=e.useState("overview"),{addToast:m}=yt();e.useEffect(()=>{t&&r&&g()},[t,r,g]);const g=e.useCallback(async()=>{try{n(!0);const a=await(e=r,Ue.get(`/api/clients/${e}`));a.data.success&&i(a.data.data)}catch(a){m("Error al cargar detalles del cliente","error")}finally{n(!1)}var e},[r,m]),u=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),h=e=>{const a={completado:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",en_desarrollo:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",planificacion:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",pausado:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};return a[e]||a.planificacion};return t?d?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),a.jsx("div",{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-slate-800 shadow-xl rounded-lg",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/3"}),a.jsx("div",{className:"h-64 bg-gray-200 dark:bg-gray-700 rounded"})]})})]})}):l?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),a.jsxs("div",{className:"inline-block w-full max-w-4xl p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-slate-800 shadow-xl rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mr-4",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-bold text-lg",children:l.nombre.charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:l.nombre}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.empresa||"Cliente individual"})]})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(c,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b border-gray-200 dark:border-slate-700 mb-6",children:a.jsxs("nav",{className:"flex space-x-8",children:[a.jsxs("button",{onClick:()=>x("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("overview"===o?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[a.jsx(A,{className:"w-4 h-4 inline mr-2"}),"Resumen"]}),a.jsxs("button",{onClick:()=>x("projects"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("projects"===o?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[a.jsx(S,{className:"w-4 h-4 inline mr-2"}),"Proyectos (",l.projects.length,")"]}),a.jsxs("button",{onClick:()=>x("activity"),className:"py-2 px-1 border-b-2 font-medium text-sm "+("activity"===o?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"),children:[a.jsx(ce,{className:"w-4 h-4 inline mr-2"}),"Actividad"]})]})}),a.jsxs("div",{className:"space-y-6",children:["overview"===o&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-6 rounded-lg",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Información Personal"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(V,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Nombre"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.nombre})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(j,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.email})]})]}),l.telefono&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(f,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Teléfono"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.telefono})]})]}),l.empresa&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Empresa"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.empresa})]})]}),l.rfc&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(z,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"RFC"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.rfc})]})]}),l.direccion&&a.jsxs("div",{className:"flex items-start",children:[a.jsx(v,{className:"w-5 h-5 text-gray-400 mr-3 mt-1"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Dirección"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:l.direccion})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(T,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Cliente desde"}),a.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:u(l.created_at)})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-6 rounded-lg",children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Estadísticas"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:l.statistics.total_proyectos}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Proyectos"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:l.statistics.proyectos_completados}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Completados"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:l.statistics.proyectos_en_desarrollo}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"En Desarrollo"})]}),a.jsxs("div",{className:"text-center p-4 bg-white dark:bg-slate-800 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:l.statistics.proyectos_planificacion}),a.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"En Planificación"})]})]})]})]}),"projects"===o&&a.jsx("div",{className:"space-y-4",children:0===l.projects.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(S,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Sin proyectos"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Este cliente aún no tiene proyectos asignados."})]}):l.projects.map(e=>{const t=(s=e.estado,{completado:b,en_desarrollo:O,planificacion:p,pausado:S}[s]||p);var s;return a.jsx("div",{className:"bg-white dark:bg-slate-700 p-6 rounded-lg border border-gray-200 dark:border-slate-600",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h5",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.nombre}),a.jsxs("span",{className:"ml-3 text-sm text-gray-500 dark:text-gray-400",children:["#",e.codigo]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:e.descripcion}),a.jsxs("div",{className:"mt-3 flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(T,{className:"w-4 h-4 mr-1"}),"Creado: ",u(e.created_at)]})]}),a.jsxs("div",{className:"ml-4 flex flex-col items-end",children:[a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(e.estado)}`,children:[a.jsx(t,{className:"w-3 h-3 mr-1"}),e.estado.replace("_"," ")]}),a.jsx("span",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:e.categoria})]})]})},e.id)})}),"activity"===o&&a.jsx("div",{className:"space-y-4",children:0===l.activities.length?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ce,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Sin actividad"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"No hay actividad registrada para este cliente."})]}):a.jsx("div",{className:"flow-root",children:a.jsx("ul",{className:"-mb-8",children:l.activities.map((e,t)=>a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[t!==l.activities.length-1&&a.jsx("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200 dark:bg-slate-600"}),a.jsxs("div",{className:"relative flex space-x-3",children:[a.jsx("div",{children:a.jsx("span",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center ring-8 ring-white dark:ring-slate-800",children:a.jsx(ce,{className:"w-4 h-4 text-white"})})}),a.jsxs("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:e.descripcion}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Tipo: ",e.tipo,e.entidad_tipo&&` • ${e.entidad_tipo}`]})]}),a.jsx("div",{className:"text-right text-sm whitespace-nowrap text-gray-500 dark:text-gray-400",children:u(e.created_at)})]})]})]})},t))})})})]}),a.jsx("div",{className:"flex justify-end pt-6 border-t border-gray-200 dark:border-slate-700 mt-6",children:a.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-slate-700 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-600 transition-colors",children:"Cerrar"})})]})]})}):null:null};wt.propTypes={isOpen:ze.bool.isRequired,onClose:ze.func.isRequired,clientId:ze.oneOfType([ze.string,ze.number])};const Ct=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,s]=e.useState([]),[r,l]=e.useState(null),[i,d]=e.useState(!0),[n,o]=e.useState(""),[c,x]=e.useState("all"),[g,u]=e.useState(1),[h,p]=e.useState(1),[b,y]=e.useState(!1),[j,N]=e.useState(!1),[k,w]=e.useState(!1),[C,S]=e.useState(!1),[P,_]=e.useState(null),[R,O]=e.useState(null),[z,$]=e.useState(null),{addToast:q}=yt(),M=e.useCallback(async()=>{try{d(!0);const e={page:g,limit:20,search:n||void 0,estado:"all"===c?void 0:c,sortBy:"created_at",sortOrder:"DESC"},a=await((e={})=>Ue.get("/api/clients",{params:e}))(e);a.data.success&&(s(a.data.data.clients),p(a.data.data.pagination.total_pages))}catch(e){q("Error al cargar clientes","error")}finally{d(!1)}},[g,n,c,q]),I=e.useCallback(async()=>{try{const e=await Ue.get("/api/client/stats");e.data.success&&l(e.data.data)}catch(e){}},[]);e.useEffect(()=>{M()},[M]),e.useEffect(()=>{I()},[I]);const F=e=>{x(e),u(1)},B=e=>{const a={activo:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",inactivo:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",pendiente:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400"};return a[e]||a.pendiente};return i&&!t.length?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>a.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},t))}),a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestión de Clientes"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y gestiona todos los clientes del sistema"})]}),a.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(Q,{className:"w-4 h-4"}),"Nuevo Cliente"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Clientes"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.total})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(D,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Clientes Activos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.active})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(xe,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Nuevos este mes"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.new_this_month})]}),a.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:a.jsx(L,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Inactivos"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.inactive})]}),a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:a.jsx(me,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})})]}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o empresa...",value:n,onChange:e=>{o(e.target.value),u(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>F("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===c?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Todos"}),a.jsx("button",{onClick:()=>F("activo"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("activo"===c?"bg-green-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Activos"}),a.jsx("button",{onClick:()=>F("inactivo"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("inactivo"===c?"bg-red-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Inactivos"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Empresa"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Contacto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Proyectos"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Registro"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:t.map(e=>{return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:e.nombre.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.nombre}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ne,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:e.empresa||"Sin empresa"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"space-y-1",children:[e.telefono&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(f,{className:"w-3 h-3 mr-2"}),e.telefono]}),e.direccion&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[a.jsx(v,{className:"w-3 h-3 mr-2"}),e.direccion.substring(0,30),"..."]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsx("span",{className:"font-medium",children:e.total_proyectos})," total"]}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.proyectos_completados," completados"]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B(e.estado)}`,children:e.estado})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400",children:[a.jsx(T,{className:"w-4 h-4 mr-2"}),(t=e.created_at,new Date(t).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}))]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>$(z===e.id?null:e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(ge,{className:"w-4 h-4"})}),z===e.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-md shadow-lg border border-gray-200 dark:border-slate-700 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{O(e.id),S(!0),$(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(A,{className:"w-4 h-4 mr-2"}),"Ver detalles"]}),a.jsxs("button",{onClick:()=>{_(e),N(!0),$(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(ue,{className:"w-4 h-4 mr-2"}),"Editar"]}),a.jsxs("button",{onClick:()=>{_(e),w(!0),$(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(oe,{className:"w-4 h-4 mr-2"}),"Enviar mensaje"]}),a.jsxs("button",{onClick:()=>{(async e=>{var a;if(window.confirm("¿Estás seguro de que quieres desactivar este cliente?"))try{await(a=e,Ue.delete(`/api/clients/${a}`)),q("Cliente desactivado exitosamente","success"),M(),I()}catch(t){q("Error al desactivar cliente","error")}})(e.id),$(null)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(m,{className:"w-4 h-4 mr-2"}),"Desactivar"]})]})})]})})]},e.id);var t})})]})}),h>1&&a.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-slate-700",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",g," de ",h]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>u(Math.max(1,g-1)),disabled:1===g,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Anterior"}),a.jsx("button",{onClick:()=>u(Math.min(h,g+1)),disabled:g===h,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),!i&&0===t.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(D,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay clientes"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comienza creando tu primer cliente."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>y(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Q,{className:"w-4 h-4 mr-2"}),"Nuevo Cliente"]})})]}),a.jsx(vt,{isOpen:b,onClose:()=>y(!1),onSuccess:()=>{M(),I()}}),a.jsx(Nt,{isOpen:j,onClose:()=>{N(!1),_(null)},onSuccess:()=>{M(),I()},client:P}),a.jsx(kt,{isOpen:k,onClose:()=>{w(!1),_(null)},onSend:async e=>{try{await((e,a)=>Ue.post(`/api/clients/${e}/message`,a))(P.id,e),q("Mensaje enviado exitosamente","success"),w(!1),_(null)}catch(a){q("Error al enviar mensaje","error")}},client:P}),a.jsx(wt,{isOpen:C,onClose:()=>{S(!1),O(null)},clientId:R})]})}},Symbol.toStringTag,{value:"Module"})),St=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,s]=e.useState([]),[r,l]=e.useState(null),[i,d]=e.useState(!0),[n,o]=e.useState(""),[g,u]=e.useState("all"),[h,p]=e.useState("all"),[y,j]=e.useState(1),[f,v]=e.useState(1),[N,k]=e.useState(!1),[w,S]=e.useState(!1),[_,R]=e.useState(!1),[$,q]=e.useState(null),[D,M]=e.useState(null),{addToast:I}=yt(),F=e.useCallback(async()=>{try{d(!0);const e={page:y,limit:20,search:n||void 0,estado:"all"===g?void 0:g,cliente_id:"all"===h?void 0:h,sortBy:"created_at",sortOrder:"DESC"},a=await((e={})=>Ue.get("/api/quotations",{params:e}))(e);a.data.success&&(s(a.data.data.quotations),v(a.data.data.pagination.total_pages))}catch(e){I("Error al cargar cotizaciones","error")}finally{d(!1)}},[y,n,g,h,I]),B=e.useCallback(async()=>{try{const e=await Ue.get("/api/quotations/stats");e.data.success&&l(e.data.data)}catch(e){}},[]);e.useEffect(()=>{F()},[F]),e.useEffect(()=>{B()},[B]);const U=e=>{u(e),j(1)},G=async(e,a,t="")=>{try{await(s=e,r={estado:a,comentarios:t},Ue.put(`/api/quotations/${s}/status`,r)),I("Estado de cotización actualizado exitosamente","success"),F(),B(),M(null)}catch(l){I("Error al actualizar estado de cotización","error")}var s,r},W=e=>{const a={borrador:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",enviada:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",aprobada:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",rechazada:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",expirada:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",convertida:"bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-400",cancelada:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};return a[e]||a.borrador},H=(e,a="MXN")=>`${{MXN:"$",USD:"$",EUR:"€"}[a]||"$"}${null==e?void 0:e.toLocaleString("es-MX",{minimumFractionDigits:2})}`,X=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return i&&!t.length?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>a.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},t))}),a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestión de Cotizaciones"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y gestiona todas las cotizaciones del sistema"})]}),a.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(Q,{className:"w-4 h-4"}),"Nueva Cotización"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Cotizaciones"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.total})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Este Mes"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.this_month})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(L,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Valor Aprobado"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:H(r.summary.approved_value)})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(P,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Tasa Conversión"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[r.summary.conversion_rate,"%"]})]}),a.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:a.jsx(he,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Convertidas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.converted})]}),a.jsx("div",{className:"p-3 bg-orange-100 dark:bg-orange-900/30 rounded-lg",children:a.jsx(pe,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})})]})})]}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar por número, título o cliente...",value:n,onChange:e=>{o(e.target.value),j(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>U("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===g?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Todas"}),a.jsx("button",{onClick:()=>U("borrador"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("borrador"===g?"bg-gray-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Borrador"}),a.jsx("button",{onClick:()=>U("enviada"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("enviada"===g?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Enviadas"}),a.jsx("button",{onClick:()=>U("aprobada"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("aprobada"===g?"bg-green-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Aprobadas"}),a.jsx("button",{onClick:()=>U("convertida"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("convertida"===g?"bg-purple-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Convertidas"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cotización"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fechas"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:t.map(e=>{const t=(s=e.estado,{borrador:O,enviada:be,aprobada:b,rechazada:C,expirada:O,convertida:pe,cancelada:c}[s]||O);var s;const r=e.fecha_expiracion&&(l=e.fecha_expiracion,new Date(l)<new Date);var l;return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx(z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.numero_cotizacion}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:e.titulo})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(V,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.cliente_nombre}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.cliente_empresa||e.cliente_email})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:H(e.total,e.moneda)}),a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.total_items," items"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${W(e.estado)}`,children:[a.jsx(t,{className:"w-3 h-3 mr-1"}),e.estado]}),r&&"enviada"===e.estado&&a.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Expirada"})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsx(T,{className:"w-3 h-3 inline mr-1"}),X(e.created_at)]}),e.fecha_expiracion&&a.jsxs("div",{className:"text-sm "+(r?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:["Exp: ",X(e.fecha_expiracion)]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>M(D===e.id?null:e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(ge,{className:"w-4 h-4"})}),D===e.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-md shadow-lg border border-gray-200 dark:border-slate-700 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{q(e),R(!0),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(A,{className:"w-4 h-4 mr-2"}),"Ver detalles"]}),"borrador"===e.estado&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{q(e),S(!0),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(ue,{className:"w-4 h-4 mr-2"}),"Editar"]}),a.jsxs("button",{onClick:()=>G(e.id,"enviada"),className:"flex items-center w-full px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(be,{className:"w-4 h-4 mr-2"}),"Enviar al cliente"]})]}),"enviada"===e.estado&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>G(e.id,"aprobada"),className:"flex items-center w-full px-4 py-2 text-sm text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(x,{className:"w-4 h-4 mr-2"}),"Aprobar"]}),a.jsxs("button",{onClick:()=>G(e.id,"rechazada"),className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(c,{className:"w-4 h-4 mr-2"}),"Rechazar"]})]}),"aprobada"===e.estado&&a.jsxs("button",{onClick:()=>(async e=>{if(window.confirm("¿Estás seguro de que quieres convertir esta cotización a proyecto?")){try{const t=await(a=e,Ue.post(`/api/quotations/${a}/convert`));t.data.success&&(I(`Cotización convertida a proyecto: ${t.data.data.project_code}`,"success"),F(),B())}catch(t){I("Error al convertir cotización","error")}var a;M(null)}})(e.id),className:"flex items-center w-full px-4 py-2 text-sm text-purple-600 dark:text-purple-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(pe,{className:"w-4 h-4 mr-2"}),"Convertir a proyecto"]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700"}),a.jsxs("button",{onClick:()=>{M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(ye,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]}),["borrador","enviada"].includes(e.estado)&&a.jsxs("button",{onClick:()=>{(async e=>{var a;if(window.confirm("¿Estás seguro de que quieres cancelar esta cotización?"))try{await(a=e,Ue.delete(`/api/quotations/${a}`)),I("Cotización cancelada exitosamente","success"),F(),B()}catch(t){I("Error al cancelar cotización","error")}})(e.id),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(m,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})})]})})]},e.id)})})]})}),f>1&&a.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-slate-700",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",y," de ",f]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>j(Math.max(1,y-1)),disabled:1===y,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Anterior"}),a.jsx("button",{onClick:()=>j(Math.min(f,y+1)),disabled:y===f,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),!i&&0===t.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay cotizaciones"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comienza creando tu primera cotización."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Q,{className:"w-4 h-4 mr-2"}),"Nueva Cotización"]})})]})]})}},Symbol.toStringTag,{value:"Module"})),Pt=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[t,s]=e.useState([]),[r,l]=e.useState(null),[i,d]=e.useState(!0),[n,o]=e.useState(""),[c,x]=e.useState("all"),[g,u]=e.useState("all"),[p,y]=e.useState(1),[j,f]=e.useState(1),[v,k]=e.useState(!1),[w,S]=e.useState(!1),[_,R]=e.useState(!1),[$,q]=e.useState(null),[D,M]=e.useState(null),{addToast:L}=yt(),I=e.useCallback(async()=>{try{d(!0);const e={page:p,limit:20,search:n||void 0,estado:"all"===c?void 0:c,cliente_id:"all"===g?void 0:g,sortBy:"created_at",sortOrder:"DESC"},a=await pa(e);a.data.success&&(s(a.data.data.invoices),f(a.data.data.pagination.total_pages))}catch(e){L("Error al cargar facturas","error")}finally{d(!1)}},[p,n,c,g,L]),F=e.useCallback(async()=>{try{const e=await Ue.get("/api/invoices/stats");e.data.success&&l(e.data.data)}catch(e){}},[]);e.useEffect(()=>{I()},[I]),e.useEffect(()=>{F()},[F]);const B=e=>{x(e),y(1)},U=async(e,a,t="")=>{try{await ba(e,{estado:a,notas:t}),L("Estado de factura actualizado exitosamente","success"),I(),F(),M(null)}catch(s){L("Error al actualizar estado de factura","error")}},G=e=>{const a={borrador:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400",enviada:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",pagada:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",parcialmente_pagada:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-400",vencida:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",cancelada:"bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-400"};return a[e]||a.borrador},W=(e,a="MXN")=>`${{MXN:"$",USD:"$",EUR:"€"}[a]||"$"}${null==e?void 0:e.toLocaleString("es-MX",{minimumFractionDigits:2})}`,H=e=>new Date(e).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"});return i&&!t.length?a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-6",children:[a.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((e,t)=>a.jsx("div",{className:"h-24 bg-gray-200 dark:bg-gray-700 rounded"},t))}),a.jsx("div",{className:"h-96 bg-gray-200 dark:bg-gray-700 rounded"})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestión de Facturas"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Administra y gestiona todas las facturas del sistema"})]}),a.jsxs("button",{onClick:()=>k(!0),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[a.jsx(Q,{className:"w-4 h-4"}),"Nueva Factura"]})]}),r&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Facturas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.total})]}),a.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:a.jsx(z,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Pagado"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:W(r.summary.total_pagado)})]}),a.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:a.jsx(P,{className:"w-6 h-6 text-green-600 dark:text-green-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Pendiente"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:W(r.summary.total_pendiente)})]}),a.jsx("div",{className:"p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-lg",children:a.jsx(O,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})})]})}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Vencidas"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.summary.vencidas})]}),a.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900/30 rounded-lg",children:a.jsx(h,{className:"w-6 h-6 text-red-600 dark:text-red-400"})})]})})]}),a.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(E,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar por número, título o cliente...",value:n,onChange:e=>{o(e.target.value),y(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-slate-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-slate-700 dark:text-white"})]}),a.jsxs("div",{className:"flex gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>B("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===c?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Todas"}),a.jsx("button",{onClick:()=>B("borrador"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("borrador"===c?"bg-gray-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Borrador"}),a.jsx("button",{onClick:()=>B("enviada"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("enviada"===c?"bg-blue-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Enviadas"}),a.jsx("button",{onClick:()=>B("pagada"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("pagada"===c?"bg-green-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Pagadas"}),a.jsx("button",{onClick:()=>B("vencida"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("vencida"===c?"bg-red-600 text-white":"bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"),children:"Vencidas"})]})]})}),a.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Factura"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Cliente"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Estado"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fechas"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Acciones"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-700",children:t.map(e=>{const t=(s=e.estado_calculado||e.estado,{borrador:O,enviada:be,pagada:b,parcialmente_pagada:N,vencida:h,cancelada:C}[s]||O);var s;const r=((e,a)=>new Date(e)<new Date&&!["pagada","cancelada"].includes(a))(e.fecha_vencimiento,e.estado);return a.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-700/50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:a.jsx(z,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.numero_factura}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 truncate max-w-xs",children:e.titulo})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(V,{className:"w-4 h-4 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.cliente_nombre}),a.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.cliente_empresa||e.cliente_email})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm font-bold text-gray-900 dark:text-white",children:W(e.total,e.moneda)}),e.total_pagado>0&&a.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Pagado: ",W(e.total_pagado)]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${G(e.estado_calculado||e.estado)}`,children:[a.jsx(t,{className:"w-3 h-3 mr-1"}),e.estado_calculado||e.estado]}),r&&a.jsxs("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:[e.dias_vencido," días vencida"]})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[a.jsx(T,{className:"w-3 h-3 inline mr-1"}),H(e.fecha_emision)]}),a.jsxs("div",{className:"text-sm "+(r?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:["Vence: ",H(e.fecha_vencimiento)]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>M(D===e.id?null:e.id),className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:a.jsx(ge,{className:"w-4 h-4"})}),D===e.id&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white dark:bg-slate-800 rounded-md shadow-lg border border-gray-200 dark:border-slate-700 z-10",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{q(e),R(!0),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(A,{className:"w-4 h-4 mr-2"}),"Ver detalles"]}),"borrador"===e.estado&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{q(e),S(!0),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(ue,{className:"w-4 h-4 mr-2"}),"Editar"]}),a.jsxs("button",{onClick:()=>U(e.id,"enviada"),className:"flex items-center w-full px-4 py-2 text-sm text-blue-600 dark:text-blue-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(be,{className:"w-4 h-4 mr-2"}),"Enviar al cliente"]})]}),["enviada","parcialmente_pagada"].includes(e.estado)&&a.jsxs("button",{onClick:()=>U(e.id,"pagada"),className:"flex items-center w-full px-4 py-2 text-sm text-green-600 dark:text-green-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(b,{className:"w-4 h-4 mr-2"}),"Marcar como pagada"]}),a.jsx("div",{className:"border-t border-gray-200 dark:border-slate-700"}),a.jsxs("button",{onClick:()=>{M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(ye,{className:"w-4 h-4 mr-2"}),"Descargar PDF"]}),["borrador","enviada"].includes(e.estado)&&a.jsxs("button",{onClick:()=>{(async e=>{var a;if(window.confirm("¿Estás seguro de que quieres cancelar esta factura?"))try{await(a=e,Ue.delete(`/api/invoices/${a}`)),L("Factura cancelada exitosamente","success"),I(),F()}catch(t){L("Error al cancelar factura","error")}})(e.id),M(null)},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-slate-700",children:[a.jsx(m,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})})]})})]},e.id)})})]})}),j>1&&a.jsxs("div",{className:"bg-white dark:bg-slate-800 px-4 py-3 flex items-center justify-between border-t border-gray-200 dark:border-slate-700",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",p," de ",j]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>y(Math.max(1,p-1)),disabled:1===p,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Anterior"}),a.jsx("button",{onClick:()=>y(Math.min(j,p+1)),disabled:p===j,className:"px-3 py-1 text-sm bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded disabled:opacity-50",children:"Siguiente"})]})]})]}),!i&&0===t.length&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No hay facturas"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Comienza creando tu primera factura."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>k(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[a.jsx(Q,{className:"w-4 h-4 mr-2"}),"Nueva Factura"]})})]}),r&&r.overdue_invoices&&r.overdue_invoices.length>0&&a.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(h,{className:"w-5 h-5 text-red-600 dark:text-red-400 mt-0.5 mr-3"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-sm font-medium text-red-800 dark:text-red-300",children:["Facturas Vencidas (",r.overdue_invoices.length,")"]}),a.jsxs("div",{className:"mt-2 text-sm text-red-700 dark:text-red-400",children:[a.jsx("ul",{className:"list-disc list-inside space-y-1",children:r.overdue_invoices.slice(0,3).map(e=>a.jsxs("li",{children:[e.numero_factura," - ",e.cliente_nombre," - ",W(e.total),"(",e.dias_vencido," días vencida)"]},e.id))}),r.overdue_invoices.length>3&&a.jsxs("p",{className:"mt-1",children:["Y ",r.overdue_invoices.length-3," más..."]})]})]})]})})]})}},Symbol.toStringTag,{value:"Module"}));export{ma as A,Pa as B,Da as C,xa as D,ga as E,ha as F,ua as G,la as H,da as I,ia as J,Ca as K,$a as L,Ve as M,_a as N,Wa as O,za as P,Oa as Q,Ga as R,La as S,Ra as T,nt as U,ot as V,Ct as W,St as X,Pt as Y,De as _,Ue as a,sa as b,wa as c,Ke as d,Ma as e,Ze as f,na as g,Je as h,Qe as i,ra as j,ea as k,Le as l,ya as m,va as n,fa as o,We as p,Xe as q,Ye as r,He as s,aa as t,Fe as u,ta as v,pa as w,ba as x,Na as y,ca as z};
